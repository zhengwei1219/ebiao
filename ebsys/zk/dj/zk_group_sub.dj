<script>&#13;&#10;function uf_valid(){&#13;&#10;	if(dataset3.Field('roleid').Value=="" && dataset3.Field('userid').Value=="" && dataset3.Field('groupid').Value==""  && dataset3.Field('roleAndunderlingId').Value=="")&#13;&#10;	{&#13;&#10;			event.returnValue = "至少需要在用户名,角色名,用户组名,角色及下属之间选择一个!";&#13;&#10;			return;&#13;&#10;	}&#13;&#10;}&#13;&#10;&#13;&#10;</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" center="  " unselectable="on" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:5;radio:0;listbox:0;textarea:0;combobox:2;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:1;tab:0;div:0;DsMain_field:0;a:0;button:6;text:6;hr:0;checkboxlist:1;radiolist:0;dropdownlist:1;grid:1;dataset:2;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0" posheight="500" poswidth="680" caption="用户组" type="ZK" dj_sn="zk_group_sub" billtaborder="<root><taborder>grid1</taborder></root>" contxml="<root><label><id>label1</id><id>label5</id></label><grid><id>grid1</id></grid><dataset><id>dataset3</id><id>dataset2</id></dataset></root>" BLONopen toolbar="自定义工具栏" window="当前窗口" posleft postop isfile="是" BLONopenBefore BLONclose userType alertType="1" isCheckPermit="否" AutoResizeXml userToolbar='<tr rowstate="add"><td>addrow</td><td>增加行</td><td></td><td></td><td></td></tr><tr rowstate="add"><td>deleterow</td><td>删除行</td><td></td><td></td><td></td></tr><tr rowstate="add"><td>save</td><td>提交数据成功后提示</td><td></td><td></td><td></td></tr><tr rowstate="add"><td>close</td><td>关闭窗口</td><td></td><td></td><td></td></tr>'><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 98px; HEIGHT: 30px; TOP: 7px; LEFT: 6px" id=label1 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() inputTag="否" controltype="label" NotBg="否">${group}名称：</LABEL><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 416px; HEIGHT: 235px; TOP: 26px; LEFT: 6px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" dataset="dataset3" blRowNo="否" hideHscroll="auto" visible="是" bodyrows="-1" bodyrowheight="-1" hideVscroll="auto" SetRowHeight="是" cavg="否" cmax="否" cmin="否" csum="否" ccount="否" ravg="否" rmax="否" rmin="否" rsum="否" rcount="否" iscrosstab="否" usertitle readonly="否" autoappend="否" autowidth="是" autoheight="是" canselect="是" titlerowheight titlerows usertitlehtml crosstabtitle crosstabdatatype="0" crosstabsumtype="0" crosstabformat rowtitle coltitle crosstabsql><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 218px; LEFT: 528px" id=dataset3 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" controltype="dataset" fieldtrans="<root><field><name>roleAndunderling</name><trans></trans><rtrans></rtrans><sql>select%20roleid%2C%20rolename%20%20from%20fcq_role%20where%20deleteMark%20%21%3D%201</sql></field><field><name>name</name><trans></trans><rtrans></rtrans><sql>select%20roleid%2C%20rolename%20%20from%20fcq_role%20where%20deleteMark%20%21%3D%201</sql></field><field><name>username</name><trans></trans><rtrans></rtrans><sql>select%20userid%2Cusername%20from%20fcq_user%20%20where%20deleteMark%20%21%3D%201</sql></field><field><name>groupname</name><trans></trans><rtrans></rtrans><sql>select%20groupid%2Cgroupname%20from%20fcq_group%20%20where%20deleteMark%20%21%3D%201</sql></field></root>" queryTableName="FCQ_GROUPSUB" masterdsfield="groupid" masterds="dataset2" subdsfield="grouplinkid" issubds="是" idparam="GSU" savetable="FCQ_GROUPSUB" submitno="1" submittype="1" isaddemptyrec="否" saveastable AfterOpen BeforeOpen BeforePost="uf_valid()" AfterPost BeforeScroll AfterScroll opensql pubpara="否" formatxml='<root><tr rowstate="add"><td>id</td><td>id</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>grouplinkid</td><td>关联id</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>userid</td><td>用户id</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>150</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>username</td><td>用户名</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%u7528%u6237%u540D%20%20%20%20%20%20%20%20%7C%3C/format%3E%3Csql1%3Eselect%20username%20%2Cuserid%20%20from%20fcq_user%20where%20deleteMark%20%21%3D%201%3C/sql1%3E%3Cblninput%3E%u5426%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>center</td><td>160</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>groupid</td><td>用户组id</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>150</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>groupname</td><td>用户组名</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%u7528%u6237%u7EC4%u540D%20%20%20%20%20%20%20%7C%3C/format%3E%3Csql1%3Eselect%20%20groupname%2Cgroupid%20from%20fcq_group%20where%20deleteMark%20%21%3D%201%3C/sql1%3E%3Cblninput%3E%u5426%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>center</td><td>160</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>roleId</td><td>角色id</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>150</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>name</td><td>角色名</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%u89D2%u8272%u540D%20%20%20%20%20%20%20%20%20%7C%3C/format%3E%3Csql1%3Eselect%20rolename%20%2CroleId%20from%20fcq_role%20where%20deleteMark%20%21%3D%201%3C/sql1%3E%3Cblninput%3E%u5426%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>center</td><td>160</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>roleAndunderlingId</td><td>角色及下属id</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>100</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>roleAndunderling</td><td>角色及下属</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%u89D2%u8272%u540D%20%20%20%20%20%20%20%20%20%7C%3C/format%3E%3Csql1%3Eselect%20rolename%20as%20roleAndunderling%2Croleid%20as%20roleAndunderlingId%20from%20fcq_role%20where%20deleteMark%20%21%3D%201%3C/sql1%3E%3Cblninput%3E%u662F%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>center</td><td>160</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>deleteMark</td><td>删除标记</td><td>整数</td><td>4</td><td></td><td>变量默认值</td><td>0</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>right</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' opensortno="1" isSubGrid="否" async="否" datasourceName idtype="1"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 40px; LEFT: 537px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" controltype="dataset" queryTableName="FCQ_GROUP" masterdsfield masterds subdsfield issubds="否" idparam="GRO" savetable="FCQ_GROUP" submitno="1" submittype="2" isaddemptyrec="否" saveastable AfterOpen=" fcpubdata.keyValue=dataset2.Field('groupid').Value ; dataset3.Open('select id,grouplinkid,roleid,roleid as name,userid,userid as username,groupid ,groupid as groupname,roleAndunderlingId,roleAndunderlingId as roleAndunderling from  fcq_groupsub where deleteMark != 1 and grouplinkid=:key_value ') ; " BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll opensql="select FCQ_GROUP.groupid,FCQ_GROUP.groupname from FCQ_GROUP where groupid=':{fcpubdata.obj.Field('groupid').Value}:' and deleteMark <> 1" pubpara="否" formatxml="<root><tr rowstate=&quot;add&quot;><td>groupid</td><td>id</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>groupname</td><td>用户组</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td>$valid('汉字、字母、数字或_');$valid('字段值不重复');$valid('值已存在');</td><td></td><td></td><td></td><td></td><td></td></tr></root>" opensortno="1" isSubGrid="否" async="否" datasourceName idtype="1"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; FONT-STYLE: normal; WIDTH: 303px; FONT-FAMILY: 宋体; HEIGHT: 20px; TOP: 6px; TEXT-DECORATION: underline; LEFT: 95px" id=label5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() inputTag="否" controltype="label" china="用户组" field="groupname" dataset="dataset2">label5</LABEL></DIV>