<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns:fc xmlns:v="urn:schemas-microsoft-com:vml">
	<HEAD>
	    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
        <STYLE>
	        @import url(../../fceform/css/dj.css); 
	    </STYLE>
		<STYLE> .userData{behavior:url(#default#userData);}</STYLE>
		<script src="../../fceform/js/MicrosoftAjax.js"></script>
		<script src="../../fceform/js/fcpub.js"></script>
		<script src="../../fceform/js/fcrundj.js"></script>
		<script src="../../fceform/js/tabpane.js"></script>		
	</HEAD>
	<body onload="pub_window_onload()"
		onkeydown="RunTabindex()" onbeforeunload="pub_window_onbeforeunload()" onkeypress="pub_window_onkeypress()"
		onresize="pub_window_onresize()">
		<script>pub_djhtm();</script>
<script>var objNav = new Object();
objNav.prevPage = "wiz_field_first";
objNav.nextPage = "wiz_field_finish";
objNav.saveConfig = saveConfig;
objNav.isOk = true;

function uf_open() {
    if (IsSpace(mainTableName.value == false)) { sqlselect() };
	PropWinOpenConfig(objNav);
           if (IsSpace(objNav.config.isNotExist) == false)
           SetCheckBoxValue($id("isNotExist"), objNav.config.isNotExist);


}
//保存配置信息,由工具栏来调用
function saveConfig() {
  	if (PropWinSaveConfig(objNav))	objNav.isOk = false;
           objNav.config.isNotExist= isNotExist.value;
}
function uf_sqlselect() {
    var val = mainTableName.value;
    var sql = "select tbname from fc_entity where tbname='" + val + "'";
    var s1 = SelectSql(sql, 1, 1);
    var oXml = SetDom(s1);
    if (oXml.documentElement == null) {
            alert(s1);
            return;
    	}
	if(oXml.documentElement.childNodes.length < 1) return;
    var sVal = oXml.childNodes(0).childNodes(0).text;
    mainTableFieldName.sql1 = "select fdname , chnname from fc_entitysub where tbname='" + sVal + "' and type='累计汇总'";
}

function uf_clearField(){
	mainTableFieldName.value ="";
}</script><script src='../../fceform/js/fcopendj.js'></script><script defer src='../../fceform/js/fcsavedj.js'></script><script src='../../fceform/js/fcselfuse.js'></script><script src='../../fceform/js/fcbasecont.js'></script><script defer src='../../fceform/js/fcother.js'></script><script src='../../fceform/js/fczk.js'></script><script defer src='../../fceform/js/selectdate.js'></script><script src='../../fceform/../fceformext/js/userfunc.js'></script><script >document.styleSheets[0].addRule("fc\\:fc_code","behavior: url(../../fceform/htc/fc_code.htc)",0);</script><script >document.styleSheets[0].addRule("fc\\:dataset","behavior: url(../../fceform/htc/dataset.htc)",0);</script><script src='../../fceform/js/fcdataset.js'></script>
<DIV id=SKbillsheet jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;fczk.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" isCheckPermit="否" alertType="1" userType contxml="<root><checkbox><id>isNotExist</id></checkbox><label><id>label9</id><id>label10</id><id>lblTitle</id><id>labTbname</id><id>labFdname</id><id>labFdchnname</id><id>labHelpText</id><id>labReadTrans</id><id>labSaveTrans</id></label><a><id>showCont</id><id>showTd</id></a><button><id>cmdActionSet</id><id>button1</id><id>button2</id><id>cmdDropDown1</id><id>cmdDropDown2</id></button><text><id>tbname</id><id>saveTrans</id><id>readTrans</id><id>helpText</id><id>fdchnname</id><id>fdname</id></text><dropdownlist><id>mainTableFieldName</id><id>mainTableName</id></dropdownlist><dataset><id>permitDs</id></dataset></root>" controlno="SKButton:0;SKDBedit:0;checkbox:3;label:17;radio:0;listbox:1;textarea:1;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:0;text:11;hr:0;checkboxlist:0;radiolist:0;dropdownlist:2;grid:0;dataset:0;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0" billtaborder="<root><taborder>mainTableFieldName</taborder><taborder>mainTableName</taborder><taborder>cmdActionSet</taborder><taborder>isNotExist</taborder><taborder>button1</taborder><taborder>button2</taborder><taborder>cmdDropDown1</taborder><taborder>cmdDropDown2</taborder><taborder>tbname</taborder><taborder>saveTrans</taborder><taborder>readTrans</taborder><taborder>helpText</taborder><taborder>fdchnname</taborder><taborder>fdname</taborder></root>" idtype="1" OtherSave="否" isfile="是" posheight="390" poswidth="390" postop posleft entertype="展现" window="有模式窗口" keyfield codeheader caption="取累计汇总" type="ZK" dj_sn="wiz_field_getCollect" BLONopen="uf_open()" center="居中" BLONclose runsave BLONopenBefore toolbar="不带工具栏" AutoResizeXml>&nbsp; <LABEL style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 195px; LEFT: 18px" id=label9 onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">表名</LABEL> <?xml:namespace prefix = fc /><fc:fc_code id=mainTableFieldName controltype="dropdownlist" datasourceName="" align="undefined" format="字段名    |   字段中文名" height="20" width="273" top="213" left="90" dataset="null" field="null" sqltrans="" visible="是" xml="" multiselect="否" addrow="否" blnempty="否" blninput="是" FieldNameList="" isTreeNewSql="0" isShowTree="0" position="absolute" sql2="null"></fc:fc_code><fc:fc_code id=mainTableName controltype="dropdownlist" datasourceName="" align="undefined" format="表名  |  中文名" height="20" width="273" top="191" left="90" dataset="null" field="null" sqltrans="%F4%D8%E6%D8%D4%F6Xrn%D6%E0%F4%F6%E0%EA%D4%F6Xrn%DA%D4%CC%D8%EA%F6%E0%F6%u0100j%F6%D2%EA%D0%E8%D8XrnXr%94%DA%D4%CC%D8%EA%F6%E0%F6%u0100j%F6%D2%D4%DE%EA%EA%D0%E8%D8Xrn%DA%F2%EC%E8Xrn%DA%D4%CC%D8%EA%F6%E0%F6%u0100Xrn%E0%EA%EA%D8%F2Xrn%E2%EC%E0%EAXrn%DA%D4%CC%D8%EA%F6%E0%F6%u0100%F4%F8%D2XrnXn%96Xn%90%EC%EAXr%7EXrn%DA%D4%CC%D8%EA%F6%E0%F6%u0100j%F6%D2%EA%D0%E8%D8XrnXt%96Xrn%DA%D4%CC%D8%EA%F6%E0%F6%u0100%F4%F8%D2j%F6%D2%EA%D0%E8%D8Xr%80XrnXrn%FC%DE%D8%F2%D8Xrn%F6%u0100%EE%D8Xt%96Xr%7CX%F8%7C%96r%9AX%F8%7E%92%90pX%F8z%94v%7CX%F8znt%92Xr%7C" visible="是" onchange='bill_onclick("uf_sqlselect();uf_clearField()")' xml="" multiselect="否" addrow="否" blnempty="否" blninput="是" FieldNameList="" isTreeNewSql="0" isShowTree="0" position="absolute" sql2="null"></fc:fc_code><LABEL style="POSITION: absolute; WIDTH: 71px; HEIGHT: 18px; TOP: 218px; LEFT: 16px" id=label10 onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">汇总字段名</LABEL><BUTTON style="POSITION: absolute; WIDTH: 75px; DISPLAY: none; HEIGHT: 25px; TOP: 167px; LEFT: 287px" id=cmdActionSet onmovestart=moveStart() onclick='bill_onclick("eformWizFieldPowerSet()")' controltype="button" dropstyle="否">权限设置</BUTTON> 
<DIV style="POSITION: absolute; WIDTH: 80px; HEIGHT: 20px; TOP: 234px; LEFT: 85px" id=isNotExist onmovestart=moveStart() noWrap value="0" controltype="checkbox" falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>在物理表中存在</SPAN></DIV><A style="POSITION: absolute; WIDTH: 188px; HEIGHT: 15px; TOP: 145px; LEFT: 91px" id=showCont onmovestart=moveStart() onclick="DjOpen('../../fceform/common/djframe.htm?djsn=zk_style_prop&amp;djtype=ZK&amp;type=2',objNav.config)" href="javascript:void(0)" target=_self controltype="a" href1>设置本字段显示控件的样式</A><A style="POSITION: absolute; WIDTH: 188px; HEIGHT: 15px; TOP: 169px; LEFT: 91px" id=showTd onmovestart=moveStart() onclick="DjOpen('../../fceform/common/djframe.htm?djsn=zk_style_prop&amp;djtype=ZK&amp;type=3',objNav.config)" href="javascript:void(0)" target=_self controltype="a" href1>设置本字段所在单元格的样式</A><BUTTON style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 139px; LEFT: 288px" id=button1 onmovestart=moveStart() onclick="bill_onclick(&quot;propWinFieldPermit(permitDs,'valueHide')&quot;)" controltype="button">隐藏设置</BUTTON><BUTTON style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 164px; LEFT: 288px" id=button2 onmovestart=moveStart() onclick="bill_onclick(&quot;propWinFieldPermit(permitDs,'valueDisable')&quot;)" controltype="button">只读设置</BUTTON><fc:dataset id=permitDs idtype="1" controltype="dataset" async="否" isSubGrid="否" pubpara="否" isaddemptyrec="否" submittype="2" submitno="1" issubds="否" opensortno="1" onValid='bill_ondatasetvalid("<dsid><valueDisable></valueDisable><valueHide></valueHide><expDisable></expDisable><expHide></expHide></dsid>")' onGetText='bill_ondatasetgettext("<dsid><valueDisable></valueDisable><valueHide></valueHide><expDisable></expDisable><expHide></expHide></dsid>")' onSetText='bill_ondatasetsettext("<dsid><valueDisable></valueDisable><valueHide></valueHide><expDisable></expDisable><expHide></expHide></dsid>")' format="<fields><field><fieldname>valueDisable</fieldname><datatype>字符</datatype><displaylabel>新建字段</displaylabel><size>3000</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>valueHide</fieldname><datatype>字符</datatype><displaylabel>新建字段</displaylabel><size>3000</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>expDisable</fieldname><datatype>字符</datatype><displaylabel>新建字段</displaylabel><size>3000</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>expHide</fieldname><datatype>字符</datatype><displaylabel>新建字段</displaylabel><size>3000</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field></fields>"></fc:dataset><LABEL style="POSITION: absolute; WIDTH: 114px; DISPLAY: none; FONT-FAMILY: 楷体_GB2312; HEIGHT: 22px; COLOR: #000080; FONT-SIZE: 14pt; TOP: 7px; FONT-WEIGHT: bold; TEXT-DECORATION: underline; LEFT: 9px" id=lblTitle onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">字段信息</LABEL><LABEL style="POSITION: absolute; WIDTH: 356px; HEIGHT: 15px; TOP: 6px; LEFT: 5px" id=labTbname onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">表名</LABEL><INPUT style="POSITION: absolute; WIDTH: 271px; DISPLAY: none; HEIGHT: 20px; TOP: 1px; LEFT: 96px" id=tbname disabled onmovestart=moveStart() size=48 controltype="text"><LABEL style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 28px; LEFT: 17px" id=labFdname onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">字段名</LABEL><LABEL style="POSITION: absolute; WIDTH: 76px; HEIGHT: 15px; TOP: 54px; LEFT: 17px" id=labFdchnname onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">字段中文名</LABEL><LABEL style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 75px; LEFT: 17px" id=labHelpText onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">帮助文本</LABEL><LABEL style="POSITION: absolute; WIDTH: 70px; HEIGHT: 16px; TOP: 100px; LEFT: 17px" id=labReadTrans onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">读出时转换</LABEL><LABEL style="POSITION: absolute; WIDTH: 70px; HEIGHT: 16px; TOP: 123px; LEFT: 17px" id=labSaveTrans onmovestart=moveStart() NotBg="否" controltype="label" inputTag="否">保存前转换</LABEL><INPUT style="POSITION: absolute; WIDTH: 255px; HEIGHT: 20px; TOP: 117px; LEFT: 91px" id=saveTrans onmovestart=moveStart() size=41 controltype="text"><INPUT style="POSITION: absolute; WIDTH: 255px; HEIGHT: 20px; TOP: 94px; LEFT: 91px" id=readTrans onmovestart=moveStart() size=41 controltype="text"><INPUT style="POSITION: absolute; WIDTH: 271px; HEIGHT: 20px; TOP: 71px; LEFT: 91px" id=helpText onmovestart=moveStart() value=字段1 size=48 controltype="text"><INPUT style="POSITION: absolute; WIDTH: 271px; HEIGHT: 20px; TOP: 48px; LEFT: 91px" id=fdchnname onmovestart=moveStart() value=字段1 size=48 controltype="text"><INPUT style="POSITION: absolute; WIDTH: 271px; HEIGHT: 20px; TOP: 25px; LEFT: 91px" id=fdname onmovestart=moveStart() value=field1 size=48 controltype="text" onblur="bill_onexit(&quot;$valid('不能为空','字段名称不能为空!');&quot;)"><BUTTON style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; BACKGROUND-COLOR: #c0c0c0; WIDTH: 17px; HEIGHT: 20px; BORDER-TOP: 0px; TOP: 94px; BORDER-RIGHT: 0px; LEFT: 345px" id=cmdDropDown1 onmovestart=moveStart() onclick='bill_onclick("PropWinFx(readTrans,tbname.value)")' controltype="button" dropstyle="否"></BUTTON><BUTTON style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; BACKGROUND-COLOR: #c0c0c0; WIDTH: 17px; HEIGHT: 20px; BORDER-TOP: 0px; TOP: 117px; BORDER-RIGHT: 0px; LEFT: 345px" id=cmdDropDown2 onmovestart=moveStart() onclick='bill_onclick("PropWinFx(saveTrans,tbname.value)")' controltype="button" dropstyle="否"></BUTTON></DIV><script></script></body></html>