<script>function uf_add(){&#13;&#10;	dataset2.Append();&#13;&#10;	var ret = fcUserFunc.selectProfiles(grid2,'key1','profileName');&#13;&#10;	if(ret != "ok"){&#13;&#10;		 dataset2.Delete();&#13;&#10;	}else{$eform('提交数据')}&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function uf_likeQuery(){&#13;&#10;	dataset1.Open("select FCQ_PROFILE.PROFILEID,FCQ_PROFILE.PROFILENAME from FCQ_PROFILE where deleteMark=0 and profileName like '"+$id('roleName').value+"%'")	&#13;&#10;	&#13;&#10;}&#13;&#10;&#13;&#10;function uf_del(){&#13;&#10;	if(IsSpace(dataset2.Field('key2').Value)) return;&#13;&#10;	DelGridRow(dataset2);	&#13;&#10;}&#13;&#10;&#13;&#10;</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true toolbar="不带工具栏" contxml="<root><button><id>button1</id><id>button2</id><id>button3</id><id>button4</id><id>button5</id></button><text><id>roleName</id></text><grid><id>grid1</id><id>grid2</id></grid><dataset><id>dataset1</id><id>dataset2</id></dataset></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:0;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:7;text:2;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:2;dataset:2;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" isCheckPermit="否" alertType="1" userType BLONclose BLONopenBefore="dataset1.PageSize=200" BLONopen window="当前窗口" posheight poswidth postop posleft center="  " isfile="是" type="ZK" caption="角色继承" dj_sn="zk_role_role" billtaborder="<root><taborder>grid1</taborder><taborder>grid2</taborder><taborder>button1</taborder><taborder>button2</taborder><taborder>button3</taborder><taborder>button4</taborder><taborder>button5</taborder><taborder>roleName</taborder></root>" jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" runParams BLONresizeBefore BLONresizeAfter allBrowser="否" useHelp envType="电脑" unselectable="on"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 300px; HEIGHT: 140px; TOP: 30px; LEFT: 3px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" blRowNo="否" hideHscroll="是" visible="是" bodyrows="-1" bodyrowheight="-1" hideVscroll="auto" SetRowHeight="是" readonly="否" autoappend="否" autowidth="否" autoheight="是" canselect="是" dataset="dataset1" crosstabsql coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabdatatype="0" crosstabtitle usertitlehtml titlerows titlerowheight usertitle iscrosstab="否" rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 300px; HEIGHT: 140px; TOP: 30px; LEFT: 313px" id=grid2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" blRowNo="否" hideHscroll="是" visible="是" bodyrows="-1" bodyrowheight="-1" hideVscroll="auto" SetRowHeight="是" readonly="否" autoappend="否" autowidth="否" autoheight="是" canselect="是" dataset="dataset2" crosstabsql coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabdatatype="0" crosstabtitle usertitlehtml titlerows titlerowheight usertitle iscrosstab="否" rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 72px; LEFT: 148px" id=dataset1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="1" controltype="dataset" savetable issubds="否" submitno="1" submittype="4" isaddemptyrec="否" pubpara="否" opensortno="1" isSubGrid="否" async="否" saveastable idparam AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll datasourceName opensql="select FCQ_PROFILE.PROFILEID,FCQ_PROFILE.PROFILENAME from FCQ_PROFILE where deleteMark=0 and profileId <> 'systemadmin'  order by sortNo " masterdsfield masterds subdsfield formatxml='<root><tr rowstate="add"><td>PROFILENAME</td><td>角色</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>288</td><td></td><td></td><td></td><td></td><td>dataset2.Open()</td><td></td><td></td><td></td></tr><tr rowstate="add"><td>PROFILEID</td><td>PROFILEID</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' queryTableName="FCQ_PROFILE"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 83px; LEFT: 457px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="5" controltype="dataset" fieldtrans="<root><field><name>profileName</name><trans></trans><rtrans></rtrans><sql>select%20profileId%20as%20key1%2CprofileName%20from%20fcq_profile</sql></field></root>" savetable="FCQ_RELATION_DICT" issubds="否" submitno="1" submittype="1" isaddemptyrec="否" pubpara="否" opensortno="2" isSubGrid="否" async="否" saveastable idparam AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll datasourceName opensql="select key1,typeId,key2 ,key1 as profileName from fcq_relation_Dict where key2=':{dataset1.Field('profileId').Value}:' and typeId='Pfile_Pfile'" masterdsfield masterds subdsfield formatxml="<root><tr rowstate=&quot;add&quot;><td>key2</td><td>角色id</td><td>字符</td><td>50</td><td>0</td><td>变量默认值</td><td>dataset1.Field('profileId').Value</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>profileName</td><td>继承角色</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>288</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>key1</td><td>新建字段</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>typeId</td><td>新建字段</td><td>字符</td><td>11</td><td>0</td><td>变量默认值</td><td>'Pfile_Pfile'</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>"><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 62px; HEIGHT: 25px; TOP: 2px; LEFT: 0px" id=button1 onmovestart=moveStart() onresize=resize() onmove=move() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("dataset1.PrevPage()")'>上一页</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 62px; HEIGHT: 25px; TOP: 2px; LEFT: 63px" id=button2 onmovestart=moveStart() onresize=resize() onmove=move() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("dataset1.NextPage()")'>下一页</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 67px; HEIGHT: 25px; TOP: 2px; LEFT: 238px" id=button3 onmovestart=moveStart() onresize=resize() onmove=move() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_likeQuery()")'>模糊查找</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 62px; HEIGHT: 25px; TOP: 1px; LEFT: 489px" id=button4 onmovestart=moveStart() onresize=resize() onmove=move() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_add()")'>添加角色</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 59px; HEIGHT: 25px; TOP: 1px; LEFT: 553px" id=button5 onmovestart=moveStart() onresize=resize() onmove=move() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_del()")'>删除角色</BUTTON><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 107px; HEIGHT: 20px; TOP: 4px; LEFT: 130px" id=roleName onmovestart=moveStart() onresize=resize() onmove=move() onmoveend=moveEnd() onresizestart=resizeStart() size=18 controltype="text"></DIV>