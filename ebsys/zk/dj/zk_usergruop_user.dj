<script>function uf_add(){&#13;&#10;	dataset2.Append();&#13;&#10;	var ret = fcUserFunc.selectUsers(grid2,'key1','userName');&#13;&#10;	if(ret != "ok"){&#13;&#10;		 dataset2.Delete();&#13;&#10;	}else{$eform('提交数据')}&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function uf_del(){&#13;&#10;	if(IsSpace(dataset2.Field('key1').Value)) return;&#13;&#10;	DelGridRow(dataset2);	&#13;&#10;}&#13;&#10;</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true toolbar="不带工具栏" runParams envType="电脑" useHelp allBrowser="否" BLONresizeAfter BLONresizeBefore jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" isCheckPermit="否" alertType="1" userType contxml="<root><button><id>button1</id><id>button2</id><id>button4</id><id>button5</id></button><grid><id>grid1</id><id>grid2</id></grid><dataset><id>dataset1</id><id>dataset2</id></dataset></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:0;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:6;text:2;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:2;dataset:2;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" billtaborder="<root><taborder>grid1</taborder><taborder>grid2</taborder><taborder>button1</taborder><taborder>button2</taborder><taborder>button4</taborder><taborder>button5</taborder></root>" BLONclose BLONopenBefore="dataset1.PageSize=200" BLONopen window="当前窗口" posheight poswidth postop posleft center="  " isfile="是" type="ZK" caption="配置用户组" dj_sn="zk_usergruop_user" unselectable="on"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 300px; HEIGHT: 140px; TOP: 30px; LEFT: 3px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" blRowNo="否" hideHscroll="auto" canselect="是" autoheight="是" autowidth="否" autoappend="否" readonly="否" SetRowHeight="是" hideVscroll="auto" bodyrowheight="-1" bodyrows="-1" visible="是" dataset="dataset1" titlerowheight titlerows usertitlehtml usertitle iscrosstab="否" crosstabtitle crosstabsumtype="0" crosstabformat rowtitle coltitle rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否" crosstabsql crosstabdatatype="0"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 300px; HEIGHT: 140px; TOP: 30px; LEFT: 313px" id=grid2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" blRowNo="否" hideHscroll="auto" canselect="是" autoheight="是" autowidth="否" autoappend="否" readonly="否" SetRowHeight="是" hideVscroll="auto" bodyrowheight="-1" bodyrows="-1" visible="是" dataset="dataset2" titlerowheight titlerows usertitlehtml usertitle iscrosstab="否" crosstabtitle crosstabsumtype="0" crosstabformat rowtitle coltitle rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否" crosstabsql crosstabdatatype="0"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 72px; LEFT: 148px" id=dataset1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idparam async="否" savetable isSubGrid="否" issubds="否" submitno="1" submittype="4" isaddemptyrec="否" opensortno="1" pubpara="否" controltype="dataset" idtype="1" AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll datasourceName opensql="select FCQ_USER_GROUP.USERGROUPID,FCQ_USER_GROUP.USERGROUPNAME from FCQ_USER_GROUP where deleteMark=0" saveastable queryTableName="FCQ_PROFILE" formatxml='<root><tr rowstate="add"><td>USERGROUPNAME</td><td>用户组名称</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>288</td><td></td><td></td><td></td><td></td><td>dataset2.Open()</td><td></td><td></td><td></td></tr><tr rowstate="add"><td>USERGROUPID</td><td>USERGROUPID</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' subdsfield masterds masterdsfield><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 83px; LEFT: 457px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idparam async="否" savetable="FCQ_RELATION_DICT" isSubGrid="否" issubds="否" submitno="1" submittype="1" isaddemptyrec="否" opensortno="1" pubpara="否" controltype="dataset" idtype="5" AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll fieldtrans="<root><field><name>profileName</name><trans></trans><rtrans></rtrans><sql>select%20profileId%20as%20key2%2CprofileName%20from%20fcq_profile</sql></field><field><name>userName</name><trans></trans><rtrans></rtrans><sql>select%20userId%2CuserName%20from%20fcq_user</sql></field></root>" datasourceName opensql="select key2,typeId,key1 ,key1 as userName from fcq_relation_Dict where key2=':{dataset1.Field('userGroupId').Value}:' and typeId='User_Ugroup'" saveastable formatxml="<root><tr rowstate=&quot;add&quot;><td>key2</td><td>角色id</td><td>字符</td><td>50</td><td>0</td><td>变量默认值</td><td>dataset1.Field('userGroupId').Value</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>userName</td><td>用户</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>288</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>key1</td><td>新建字段</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>typeId</td><td>新建字段</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td>User_Ugroup</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>" subdsfield masterds masterdsfield><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 62px; HEIGHT: 25px; TOP: 2px; LEFT: 0px" id=button1 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("dataset1.PrevPage()")'>上一页</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 62px; HEIGHT: 25px; TOP: 2px; LEFT: 63px" id=button2 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("dataset1.NextPage()")'>下一页</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 25px; TOP: 1px; LEFT: 488px" id=button4 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_add()")'>添加用户</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 58px; HEIGHT: 25px; TOP: 1px; LEFT: 554px" id=button5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_del()")'>删除用户</BUTTON></DIV>