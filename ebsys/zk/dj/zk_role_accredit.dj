<script>var orgId="";&#13;&#10;function uf_open(){&#13;&#10;	TreeRootNodeHide($id('tree1'), 'none');&#13;&#10;}&#13;&#10;function uf_clickTree(nodeValue){//单击树控件要获取单击节点和子节点，还有最大顺序号&#13;&#10;	orgId= nodeValue;&#13;&#10;	dataset1.Open();//子节点的信息&#13;&#10;}&#13;&#10;&#13;&#10;function uf_orgid(){//返回选中的组织机构id&#13;&#10;	return orgId;	&#13;&#10;}&#13;&#10;function uf_add(){&#13;&#10;	dataset1.Append();&#13;&#10;	var ret = fcUserFunc.selectProfiles(grid1,'key2','profileName');&#13;&#10;	if(ret != "ok"){&#13;&#10;		 dataset1.Delete();&#13;&#10;	}else{$eform('提交数据')}&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function us_ds2OPen(){&#13;&#10;	dataset2.Open("select key1,typeId,key2 ,key2 as profileName from fcq_relation_Dict where key1='" + dataset1.Field('key2').Value + "' and typeId='Pfile_Pfile'")	&#13;&#10;}</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" unselectable="on" runParams BLONresizeBefore BLONresizeAfter allBrowser="否" useHelp envType="电脑" billtaborder="<root><taborder>grid1</taborder><taborder>button4</taborder><taborder>button5</taborder><taborder>grid2</taborder></root>" dj_sn="zk_role_accredit" caption="角色授权" type="ZK" isfile="是" center="  " posleft postop poswidth posheight window="当前窗口" BLONopen="uf_open()" BLONopenBefore BLONclose userType alertType="1" isCheckPermit="否" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:3;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:0;text:0;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:2;dataset:2;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" contxml="<root><label><id>label1</id></label><button><id>button4</id><id>button5</id></button><grid><id>grid1</id><id>grid2</id></grid><dataset><id>dataset1</id><id>dataset2</id></dataset><tree><id>tree1</id></tree></root>" toolbar="不带工具栏"><IMG onresizeend=resizeEnd() style="BORDER-BOTTOM: 1px solid; POSITION: absolute; BORDER-LEFT: 1px solid; WIDTH: 320px; DISPLAY: block; HEIGHT: 587px; BORDER-TOP: 1px solid; TOP: 27px; BORDER-RIGHT: 1px solid; LEFT: 6px" id=tree1 class=control-border-color onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_tree.gif" controltype="tree" datasourceName AutoSizeXml="<record id ='tree1'><Halign>不动</Halign><HWidth></HWidth><HUnit>px</HUnit><WSetType>百分比设置</WSetType><Width></Width><WExt></WExt><WSetUnit>px</WSetUnit><MinW></MinW><Palign>不动</Palign><PWidth></PWidth><PUnit>px</PUnit><HSetType>伸缩设置</HSetType><Height></Height><HExt>5</HExt><HSetUnit>px</HSetUnit><MinH></MinH></record>" sql xml='<TreeNode id="1" text="treeItem" roottarget="_self" rootaction=""  target="_self" title="treeItem"  icon=""  check="undefined" code=""><TreeNode id="2" text="增加节点"  target="_self" title="增加节点"  icon=""  check="undefined" code=""/></TreeNode>' sql2="select  sID,sParent,sName,sID,sOrgKindId from FCQ_org  where deleteMark <> 1 and sOrgKindId <> 'psm' order by sortNo" clicknode=" &#13;&#10;uf_clickTree(Global.selectedItem.code)&#13;&#10; &#13;&#10;&#13;&#10; " roottext sourcetype="3" ischecked="否" isAll="是" opentb="_self"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 300px; HEIGHT: 140px; TOP: 27px; LEFT: 333px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" crosstabdatatype="0" crosstabsql cavg="否" cmax="否" cmin="否" csum="否" ccount="否" ravg="否" rmax="否" rmin="否" rsum="否" rcount="否" coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabtitle iscrosstab="否" usertitle usertitlehtml titlerows titlerowheight dataset="dataset1" canselect="是" autoheight="是" autowidth="否" autoappend="否" readonly="否" SetRowHeight="是" hideVscroll="auto" bodyrowheight="-1" bodyrows="-1" visible="是" hideHscroll="auto" blRowNo="否" controltype="grid"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 99px; LEFT: 479px" id=dataset1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" controltype="dataset" opensql="select key1,typeId,key2,key2 as profileName from fcq_relation_Dict where typeId='Org_Profile' and key1=':{uf_orgid()}:'" subdsfield masterds masterdsfield formatxml='<root><tr rowstate="add"><td>PROFILENAME</td><td>角色名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>280</td><td></td><td></td><td></td><td></td><td>us_ds2OPen()</td><td></td><td></td><td></td></tr><tr rowstate="add"><td>key2</td><td>角色id</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>key1</td><td>组织机构id</td><td>字符</td><td>50</td><td>0</td><td>变量默认值</td><td>orgId</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>typeId</td><td>关系词典类型</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td>Org_Profile</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' queryTableName="FCQ_PROFILE" idparam AfterScroll BeforeScroll AfterPost BeforePost BeforeOpen AfterOpen async="否" isSubGrid="否" opensortno="1" pubpara="否" saveastable isaddemptyrec="否" submittype="1" submitno="1" issubds="否" savetable="FCQ_RELATION_DICT" datasourceName idtype="5" fieldtrans="<root><field><name>PROFILENAME</name><trans></trans><rtrans></rtrans><sql>select%20profileId%20as%20key2%2CprofileName%20from%20fcq_profile</sql></field></root>"><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 25px; TOP: 1px; LEFT: 333px" id=button4 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_add()")'>新增</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 25px; TOP: 0px; LEFT: 417px" id=button5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("DelGridRow(dataset1)")'>删除</BUTTON><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 300px; HEIGHT: 140px; TOP: 27px; LEFT: 643px" id=grid2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" crosstabdatatype="0" crosstabsql cavg="否" cmax="否" cmin="否" csum="否" ccount="否" ravg="否" rmax="否" rmin="否" rsum="否" rcount="否" coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabtitle iscrosstab="否" usertitle usertitlehtml titlerows titlerowheight dataset="dataset2" canselect="是" autoheight="是" autowidth="否" autoappend="否" readonly="否" SetRowHeight="是" hideVscroll="auto" bodyrowheight="-1" bodyrows="-1" visible="是" hideHscroll="auto" blRowNo="否" controltype="grid"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 192px; LEFT: 825px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" controltype="dataset" opensql subdsfield masterds masterdsfield formatxml='<root><tr rowstate="add"><td>key2</td><td>角色id</td><td>字符</td><td>50</td><td>0</td><td>变量默认值</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>profileName</td><td>继承角色</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>280</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>key1</td><td>新建字段</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>typeId</td><td>新建字段</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' idparam AfterScroll BeforeScroll AfterPost BeforePost BeforeOpen AfterOpen async="否" isSubGrid="否" opensortno="1" pubpara="否" saveastable isaddemptyrec="否" submittype="4" submitno="1" issubds="否" savetable datasourceName idtype="5" fieldtrans="<root><field><name>profileName</name><trans></trans><rtrans></rtrans><sql>select%20profileId%20as%20key2%2CprofileName%20from%20fcq_profile</sql></field></root>"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 117px; FONT-FAMILY: 宋体; HEIGHT: 26px; COLOR: #0000ff; FONT-SIZE: 14pt; TOP: 4px; FONT-WEIGHT: bold; LEFT: 6px" id=label1 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">组织结构</LABEL></DIV>