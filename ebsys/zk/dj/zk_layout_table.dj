<script>function uf_type(){&#13;&#10;	return "'"+$id('comSqlType').value+"'";&#13;&#10;}&#13;&#10;&#13;&#10;function uf_open(){&#13;&#10;	//var len = fcpubdata.obj[0].childNodes[0].childNodes.length - 1;&#13;&#10;	if(fcpubdata.obj[0] != null && fcpubdata.obj[0].xml != "" && fcpubdata.obj[0].childNodes[0].childNodes[fcpubdata.obj[0].childNodes[0].childNodes.length - 1].childNodes[1].childNodes.length > 8){&#13;&#10;		dataset2.OpenXmlData(fcpubdata.obj[0].xml);	&#13;&#10;	}&#13;&#10;	if(IsSpace(fcpubdata.obj[1]) == false){&#13;&#10;		comSqlType.value = fcpubdata.obj[1];&#13;&#10;	}else{&#13;&#10;		$id('comSqlType').value = "电脑";&#13;&#10;	}&#13;&#10;	&#13;&#10;	getDsnList(cboDsn,"");&#13;&#10;	//uf_idtype();&#13;&#10;	uf_hide_subds();&#13;&#10;	uf_rowsGtZero();&#13;&#10;	uf_muchKeyField();&#13;&#10;}&#13;&#10;&#13;&#10;function uf_saveDsXml(){&#13;&#10;	dataset2.Update();&#13;&#10;	//fcpubdata.obj = dataset2.oDom;&#13;&#10;	var dsXml = dataset2.xml;&#13;&#10;	var sqlType = comSqlType.value;	&#13;&#10;	var arr = [dsXml,sqlType];&#13;&#10;	window.returnValue = arr;&#13;&#10;    window.close(); &#13;&#10;}&#13;&#10;&#13;&#10;function uf_dsPropsSave(){&#13;&#10;	var dsProps = 'opensortno="' + opensortno.value + '" submittype="' + submittype.value + '" submitno="' + submitno.value + '" issubds="' + issubds.value + '" isSubGrid="' + isSubGrid.value + '" datasourceName="' + cboDsn.value + '" isaddemptyrec="' + isaddemptyrec.value + '" async="' + async.value + '" ';	//idtype="' + idtype.value +'"&#13;&#10;    //if(idparam.value != ""){&#13;&#10;      //dsProps += ' idparam="' + idparam.value + '" ';&#13;&#10;    //}&#13;&#10;    if(subdsfield.value != ""){&#13;&#10;        dsProps += ' subdsfield="' + subdsfield.value+ '" ';&#13;&#10;    }&#13;&#10;    if(masterdsfield.value != ""){&#13;&#10;        dsProps += ' masterdsfield="' + masterdsfield.value+ '" ';&#13;&#10;    }&#13;&#10;    if( masterds.value != ""){&#13;&#10;         dsProps += ' masterds="' + masterds.value+'"';&#13;&#10;    }&#13;&#10;	dataset2.Field('dsProps').Value = dsProps;&#13;&#10;	&#13;&#10;	&#13;&#10;}&#13;&#10;function uf_subField(stratSelect){//从表数据集字段&#13;&#10;	if(IsSpace(dataset2.Field('tbname').Value) == true) {&#13;&#10;		alert("先选择从表数据集中的表名");&#13;&#10;		SetCheckBoxValue($id('issubds'), '0');&#13;&#10;		return;	&#13;&#10;	}&#13;&#10;	if($id('issubds').value == '0') return; &#13;&#10;	uf_selectLinkField();&#13;&#10;	if(IsSpace($id('subdsfield').value) == true) SetCheckBoxValue($id('issubds'), '0');&#13;&#10;	uf_sel_ds_field();	&#13;&#10;}&#13;&#10;&#13;&#10;function uf_selectLinkField(){//选择关联字段&#13;&#10;    CommonSelect({&#13;&#10;    	width : 600,&#13;&#10;    	height : 200,&#13;&#10;        isgrid : 1, //可选项, 弹出窗口中是否有grid控件,其值=0或1.&#13;&#10;        obj : subdsfield,  //必选项, 用于修改的前一窗口控件对象,包含是grid对象.&#13;&#10;        title : "选择主表关联字段",//&#13;&#10;        isfind : 1, //1是模糊查找,0是没有模糊查找&#13;&#10;        findvalue : dataset2.Field('tbname').Value,//模糊查找值&#13;&#10;        gridcolwidth : [250,350],&#13;&#10;        gridcoltitle : ["主表名","主表关联的字段"], &#13;&#10;        //sql : "select linktbname,fdname from fc_entitysub where tbname like ':v_get%'  and type='主从信息表'"&#13;&#10;        sql : "select linktbname,fdname from fc_entitysub where tbname='"+dataset2.Field('tbname').Value +"'  and type='主从信息表'"&#13;&#10;&#13;&#10;    })&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;function uf_hide_subds(){&#13;&#10;	if($id("issubds").value == "1"){&#13;&#10;		$id("divRel").style.display="";	&#13;&#10;	}else{&#13;&#10;		$id("divRel").style.display="none";	&#13;&#10;		$id("subdsfield").value="";&#13;&#10;		$id("masterds").value="";&#13;&#10;		$id("masterdsfield").value="";&#13;&#10;	}&#13;&#10;}&#13;&#10;&#13;&#10;function uf_sel_ds_field() {&#13;&#10;	var tbName = dataset2.Field('tbName').Value;&#13;&#10;	if(tbName == "") return;&#13;&#10;	var xmlRet = SelectSql("select linktbname,linkfdname from fc_entitysub where type='主从信息表' and tbname='"+tbName+"' and fdname='"+$id('subdsfield').value+"'",1,1);&#13;&#10;	var oXml = SetDom(xmlRet);&#13;&#10;	if (oXml.documentElement == null) {&#13;&#10;        alert(xmlRet);&#13;&#10;        return;&#13;&#10;	}&#13;&#10;	if (oXml.documentElement.childNodes.length < 1) return;&#13;&#10;	masterds.value = oXml.documentElement.childNodes[0].childNodes[0].text;&#13;&#10;	masterdsfield.value = oXml.documentElement.childNodes[0].childNodes[1].text;&#13;&#10;	SetCheckBoxValue($id('comRows'), '1');&#13;&#10;}&#13;&#10;&#13;&#10;function uf_dsPropsRead(){&#13;&#10;	var dsProps = dataset2.Field('dsProps').Value;&#13;&#10;	var xmlProps = dataset2.Field('xmlProps').Value;&#13;&#10;	if(IsSpace(dsProps) == false){&#13;&#10;		var arr = dsProps.split(" ");&#13;&#10;		for(var i=0;i<arr.length;i++){&#13;&#10;			if(IsSpace(arr[i])) continue;&#13;&#10;			var arrSub = arr[i].split("=");&#13;&#10;			if(arrSub.length != 2) continue;&#13;&#10;			arrSub[1] = RepStr(arrSub[1],'"',''); &#13;&#10;			arrSub[1] = RepStr(arrSub[1],"'",""); &#13;&#10;			if(arrSub[0] == "issubds" || arrSub[0] == "isSubGrid" || arrSub[0] == "isaddemptyrec" || arrSub[0] == "async"){&#13;&#10;				SetCheckBoxValue($id(arrSub[0]), arrSub[1]);&#13;&#10;			}&#13;&#10;			//if(arrSub[0] == "idtype"){&#13;&#10;				 //SetRadioValue($id(arrSub[0]), arrSub[1]);&#13;&#10;			//}&#13;&#10;			if(arrSub[0] == "idparam" || arrSub[0] == "opensortno" || arrSub[0] == "submittype" || arrSub[0] == "submitno"  || arrSub[0] == "cboDsn" || arrSub[0] == "subdsfield" || arrSub[0] == "masterdsfield" || arrSub[0] == "masterds"){&#13;&#10;				$id(arrSub[0]).value = arrSub[1];&#13;&#10;			}&#13;&#10;		}	&#13;&#10;	}else{&#13;&#10;		var arrChe = ["issubds","isSubGrid", "isaddemptyrec","async"]&#13;&#10;		for(var k=0;k<arrChe.length;k++){&#13;&#10;			SetCheckBoxValue($id(arrChe[k]), '0');&#13;&#10;		}&#13;&#10;		//SetRadioValue(idtype, 1);&#13;&#10;		opensortno.value = 1;&#13;&#10;		submittype.value = 1;&#13;&#10;		submitno.value = 1;	&#13;&#10;		cboDsn.value = "";&#13;&#10;		&#13;&#10;		subdsfield.value = "";&#13;&#10;		masterdsfield.value = "";&#13;&#10;		masterds.value = "";&#13;&#10;		//idparam.value = "BBB";&#13;&#10;	}&#13;&#10;	&#13;&#10;	uf_hide_subds();&#13;&#10;	//uf_idtype();&#13;&#10;}&#13;&#10;&#13;&#10;function uf_rowsGtZero(){&#13;&#10;	if($id('comRows').value == 0) {&#13;&#10;		SetCheckBoxValue($id("isSubGrid"), "0");&#13;&#10;	}else{&#13;&#10;		SetCheckBoxValue($id("isSubGrid"), "1");&#13;&#10;	}&#13;&#10;}&#13;&#10;&#13;&#10;function uf_isSubGrid(){&#13;&#10;	if(isSubGrid.value == "1" && comRows.value == 0) {&#13;&#10;		//comRows.value = 1;&#13;&#10;		dataset2.Field('rows').Value= 1;&#13;&#10;		dataset2.fset_cont1() ;&#13;&#10;	}&#13;&#10;	if(isSubGrid.value == "0" && comRows.value > 0){&#13;&#10;		//comRows.value = 0;&#13;&#10;		dataset2.Field('rows').Value = 0;&#13;&#10;		dataset2.fset_cont1() ;&#13;&#10;	}&#13;&#10;	&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function  checkZiMu(){&#13;&#10;	var s = Trim($id('idparam').value);&#13;&#10;	&#13;&#10;	var reg = /^[A-Z]{3}$/;&#13;&#10;	if(reg.test(s) == false){&#13;&#10;		alert("必须是三个大写字母")	;&#13;&#10;		$id('idparam').value ="BBB";&#13;&#10;		uf_dsPropsSave()&#13;&#10;		return;&#13;&#10;	}&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function uf_muchKeyField(){&#13;&#10;	var display = "none";&#13;&#10;	if($id("isMuchKeyFields").value == "1"){&#13;&#10;		display = "block";&#13;&#10;	}&#13;&#10;	$id('isKeyInput').style.display = display;&#13;&#10;	$id('muchKeyFields').style.display = display;&#13;&#10;	$id('labKeyFields').style.display = display;&#13;&#10;	&#13;&#10;}&#13;&#10;&#13;&#10;function uf_xmlPropsSave(){&#13;&#10;	var xmlProps = "";&#13;&#10;	&#13;&#10;	if($id('isMuchKeyFields').value == "1"){&#13;&#10;		if(IsSpace($id('muchKeyFields').value)) {&#13;&#10;			alert("请选择多主键字段");&#13;&#10;			return;&#13;&#10;		}&#13;&#10;		xmlProps = "<keyFields>"+$id('muchKeyFields').value+"</keyFields><isKeyInput>"+$id('isKeyInput').value+"</isKeyInput>";&#13;&#10;	}&#13;&#10;	dataset2.Field("xmlProps").Value = xmlProps;&#13;&#10;	uf_muchKeyField();&#13;&#10;}&#13;&#10;&#13;&#10;function uf_xmlPropsRead(){&#13;&#10;	var xmlProps = dataset2.Field('xmlProps').Value;&#13;&#10;	if(IsSpace(xmlProps) == false){&#13;&#10;		SetCheckBoxValue($id("isMuchKeyFields"), "1");&#13;&#10;		xmlProps ="<root>" + xmlProps + "</root>";&#13;&#10;		var xmlDom = SetDom(xmlProps);&#13;&#10;		$id('muchKeyFields').value = xmlDom.documentElement.childNodes[0].text;&#13;&#10;		SetCheckBoxValue($id("isKeyInput"),xmlDom.documentElement.childNodes[1].text);&#13;&#10;	}else{&#13;&#10;		SetCheckBoxValue($id("isMuchKeyFields"), "0");&#13;&#10;		SetCheckBoxValue($id("isKeyInput"),"0");&#13;&#10;		$id('muchKeyFields').value = "";&#13;&#10;		&#13;&#10;	}	&#13;&#10;}</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true toolbar="自定义工具栏" AutoResizeXml billtaborder="<root><taborder>issubds</taborder><taborder>async</taborder><taborder>isaddemptyrec</taborder><taborder>isSubGrid</taborder><taborder>comSqlType</taborder><taborder>opensortno</taborder><taborder>submittype</taborder><taborder>submitno</taborder><taborder>cboDsn</taborder><taborder>comRows</taborder><taborder>masterdsfield</taborder><taborder>masterds</taborder><taborder>subdsfield</taborder><taborder>dropdownlist1</taborder><taborder>grid1</taborder><taborder>isMuchKeyFields</taborder><taborder>isKeyInput</taborder><taborder>muchKeyFields</taborder></root>" dj_sn="zk_layout_table" caption="选择表" type="ZK" isfile="是" center="居中" posleft postop poswidth="700" posheight="450" window="有模式窗口" BLONopen="uf_open()" BLONopenBefore BLONclose userType alertType="1" isCheckPermit="否" controlno="SKButton:0;SKDBedit:0;checkbox:2;label:18;radio:0;listbox:0;textarea:2;combobox:2;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:10;text:10;hr:0;checkboxlist:0;radiolist:0;dropdownlist:3;grid:1;dataset:3;spin:2;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" contxml="<root><checkbox><id>issubds</id><id>async</id><id>isaddemptyrec</id><id>isSubGrid</id><id>isMuchKeyFields</id><id>isKeyInput</id></checkbox><label><id>label1</id><id>label4</id><id>label5</id><id>Label68</id><id>label11</id><id>label12</id><id>label13</id><id>label14</id><id>label7</id><id>label6</id><id>label16</id><id>labKeyFields</id><id>label15</id><id>label17</id><id>label18</id></label><combobox><id>comSqlType</id><id>opensortno</id><id>submittype</id><id>submitno</id><id>cboDsn</id><id>comRows</id></combobox><div><id>divRel</id></div><text><id>masterdsfield</id><id>masterds</id><id>subdsfield</id></text><dropdownlist><id>dropdownlist1</id><id>muchKeyFields</id></dropdownlist><grid><id>grid1</id></grid><dataset><id>dataset2</id></dataset></root>" jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;fczk.js&#13;&#10;~userfunc.js" allBrowser="否" unselectable="on" userToolbar='<tr rowstate="add"><td>addrow</td><td>增加行</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>deleterow</td><td>删除行</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>ok</td><td>提交数据成功后刷新上一窗口</td><td></td><td>uf_saveDsXml()</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>close</td><td>关闭窗口</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>'><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 255px; HEIGHT: 337px; TOP: 29px; LEFT: 2px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" bodyrows="-1" bodyrowheight="-1" blRowNo="否" hideVscroll="auto" hideHscroll="auto" SetRowHeight="是" readonly="否" autoappend="否" autowidth="否" autoheight="否" canselect="是" dataset="dataset2" visible="是" controltype="grid" crosstabdatatype="0" crosstabsql cavg="否" cmax="否" cmin="否" csum="否" ccount="否" ravg="否" rmax="否" rmin="否" rsum="否" rcount="否" coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabtitle iscrosstab="否" usertitle usertitlehtml titlerows titlerowheight><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 279px; HEIGHT: 20px; TOP: 29px; LEFT: 330px; ButtonWidth: 10" id=dropdownlist1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_fccode.gif" dataset="dataset2" format="  类型  |" visible="是" controltype="dropdownlist" field="type1" china="类型" temptext tempvalue FieldNameList isTreeNewSql="0" isShowTree="0" multiselect="否" addrow="否" blnempty="否" blninput="否" xml check="2" sql="select name as type1 ,code as type from fc_datadict where typename='布局模板子表'" datasourceName><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 79px; HEIGHT: 16px; TOP: 10px; LEFT: 9px" id=label1 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">查询信息类型</LABEL><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 169px; HEIGHT: 25px; TOP: 4px; LEFT: 90px" id=comSqlType onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="combobox" async="否" temptext tempvalue check="2" sql="select code,name from fc_datadict where typename ='用途类别' and code not  like 'Fix%'" datasourceName></SELECT><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 204px; HEIGHT: 17px; TOP: 54px; LEFT: 274px" id=label4 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">明细数据集时一条记录所占的行数</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 33px; LEFT: 274px" id=label5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">类型</LABEL><SPAN oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 68px; DISPLAY: block; FONT-FAMILY: ; HEIGHT: 12px; FONT-SIZE: 12px; TOP: 73px; LEFT: 497px" id=Label68 onresize=resize() onmove=move() controltype="label" value="Label68">打开次序：</SPAN><SELECT oncontrolselect=controlselect() style="POSITION: absolute; BACKGROUND-COLOR: #ffffff; WIDTH: 47px; DISPLAY: block; FONT-FAMILY: ; HEIGHT: 25px; FONT-SIZE: 12px; TOP: 69px; LEFT: 559px" id=opensortno onresize=resize() onmove=move() onchange='bill_onclick("uf_dsPropsSave()")' controltype="combobox" async="否" temptext="1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5&#13;&#10;6&#13;&#10;7&#13;&#10;8&#13;&#10;9" tempvalue="1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5&#13;&#10;6&#13;&#10;7&#13;&#10;8&#13;&#10;9" check="1" sql datasourceName backheight="25" backwidth="56"><OPTION selected value=1>1</OPTION><OPTION value=2>2</OPTION><OPTION value=3>3</OPTION><OPTION value=4>4</OPTION><OPTION value=5>5</OPTION><OPTION value=6>6</OPTION><OPTION value=7>7</OPTION><OPTION value=8>8</OPTION><OPTION value=9>9</OPTION></SELECT> 
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 80px; HEIGHT: 20px; TOP: 244px; LEFT: 270px" id=issubds onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() noWrap controltype="checkbox" NotBg="否" value="0" fc_onclick='bill_onclick("uf_subField();uf_hide_subds();uf_dsPropsSave();")' falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>本数据集为从表数据集</SPAN></DIV>
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 1px solid; POSITION: absolute; BORDER-LEFT: 1px solid; WIDTH: 336px; DISPLAY: none; HEIGHT: 94px; BORDER-TOP: 1px solid; TOP: 267px; BORDER-RIGHT: 1px solid; LEFT: 273px" id=divRel onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="div" NotBg="否"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 118px; HEIGHT: 16px; TOP: 10px; LEFT: 7px" id=label11 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">从表数据集的字段:</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 15px; HEIGHT: 15px; TOP: 20px; LEFT: 111px" id=label12 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">=</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 78px; HEIGHT: 17px; TOP: 41px; LEFT: 9px" id=label13 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">主表数据集:</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 118px; HEIGHT: 22px; TOP: 70px; LEFT: 9px" id=label14 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">主表数据集的字段:</LABEL><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 202px; HEIGHT: 20px; TOP: 65px; LEFT: 124px" id=masterdsfield onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() readOnly size=33 controltype="text"><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 202px; HEIGHT: 20px; TOP: 37px; LEFT: 124px" id=masterds onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() readOnly size=33 controltype="text"> <INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 202px; HEIGHT: 20px; TOP: 8px; LEFT: 124px" id=subdsfield onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() onchange='bill_onclick("uf_dsPropsSave();")' value=公共选择函数返回值要绑定数据集 readOnly size=33 dataset="dataset2" controltype="text" field="fdname" china="公共选择函数返回值要绑定数据集"></DIV><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 96px; LEFT: 273px" id=label7 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">提交类型:</LABEL><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 157px; HEIGHT: 25px; TOP: 93px; LEFT: 330px" id=submittype onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() onchange='bill_onclick("uf_dsPropsSave()")' controltype="combobox" async="否" temptext="智能提交变动过的记录&#13;&#10;只提交当前的一条记录&#13;&#10;提交所有变动过的记录&#13;&#10;不提交&#13;&#10;提交所有记录" tempvalue="1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5" check="1" sql datasourceName backheight="25" backwidth="191"><OPTION selected value=1>智能提交变动过的记录</OPTION><OPTION value=2>只提交当前的一条记录</OPTION><OPTION value=3>提交所有变动过的记录</OPTION><OPTION value=4>不提交</OPTION><OPTION value=5>提交所有记录</OPTION></SELECT><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 96px; LEFT: 498px" id=label6 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">提交次序:</LABEL><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 46px; HEIGHT: 25px; TOP: 93px; LEFT: 559px" id=submitno onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() onchange='bill_onclick("uf_dsPropsSave()")' controltype="combobox" async="否" temptext="1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5&#13;&#10;6&#13;&#10;7&#13;&#10;8&#13;&#10;9" tempvalue="1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5&#13;&#10;6&#13;&#10;7&#13;&#10;8&#13;&#10;9" check="1" sql datasourceName backheight="25" backwidth="43"><OPTION selected value=1>1</OPTION><OPTION value=2>2</OPTION><OPTION value=3>3</OPTION><OPTION value=4>4</OPTION><OPTION value=5>5</OPTION><OPTION value=6>6</OPTION><OPTION value=7>7</OPTION><OPTION value=8>8</OPTION><OPTION value=9>9</OPTION></SELECT> <LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 83px; HEIGHT: 19px; TOP: 72px; LEFT: 274px" id=label16 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">数据源:</LABEL><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 126px; HEIGHT: 25px; TOP: 67px; LEFT: 330px" id=cboDsn onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() onchange='bill_onclick("uf_dsPropsSave()")' controltype="combobox" async="否" temptext tempvalue check="1" sql datasourceName backheight="25" backwidth="148"></SELECT> 
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 80px; HEIGHT: 20px; TOP: 184px; LEFT: 270px" id=async onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() noWrap controltype="checkbox" NotBg="否" value="0" fc_onclick='bill_onclick("uf_dsPropsSave();")' falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>初次进入时是否异步打开</SPAN></DIV>
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 80px; HEIGHT: 20px; TOP: 165px; LEFT: 270px" id=isaddemptyrec onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() noWrap controltype="checkbox" NotBg="否" value="0" fc_onclick='bill_onclick("uf_dsPropsSave();")' falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>初次进入时是否加空记录</SPAN></DIV><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 132px; LEFT: 594px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="1" controltype="dataset" async="否" isSubGrid="否" opensortno="1" pubpara="否" saveastable isaddemptyrec="否" submittype="1" submitno="1" issubds="否" savetable AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll="uf_dsPropsRead();uf_xmlPropsRead()" datasourceName opensql subdsfield masterds masterdsfield formatxml="<root><tr rowstate=&quot;add&quot; multisel=&quot;是&quot;><td>tbname</td><td>表名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%u8868%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%21%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u4E2D%u6587%u540D%3C/format%3E%3Csql1%3Eselect%20%20fc_entity.tbname%2Ctbchnname%20from%20fc_entity%20inner%20join%20fc_query%20on%20fc_entity.tbname%3Dfc_query.tbname%20%20where%20fc_query.type%3D%3A%7Buf_type%28%29%7D%3A%3C/sql1%3E%3Cblninput%3E%u662F%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3CisShowTree%3E0%3C/isShowTree%3E%3CisTreeNewSql%3E0%3C/isTreeNewSql%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>center</td><td>120</td><td></td><td></td><td>$valid('汉字、字母、数字或_');$valid('字段值不重复');$valid('值已存在');</td><td></td><td>uf_dsPropsSave();uf_xmlPropsSave()</td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot; multisel=&quot;是&quot;><td>tbchnname</td><td>表中文名</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>120</td><td></td><td></td><td></td><td></td><td>uf_dsPropsSave()</td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot; multisel=&quot;&quot;><td>type</td><td>类型</td><td>整数</td><td>4</td><td></td><td>数据项</td><td>1</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>right</td><td>80</td><td></td><td></td><td>$valid('整数');</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>rows</td><td>一条记录所占行数</td><td>整数</td><td>4</td><td></td><td>数据项</td><td>0</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>right</td><td>80</td><td></td><td></td><td>$valid('整数');</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>dsProps</td><td>数据集设置</td><td>字符</td><td>6000</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>xmlProps</td><td>多字段作主键设置</td><td>字符</td><td>1000</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>type1</td><td>类型</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td>表单上要生成本数据集</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>fdname</td><td>公共选择函数返回值要绑定数据集</td><td>字符</td><td>30</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>isMuchKeyFields</td><td>是多字段主键字段</td><td>字符</td><td>10</td><td>0</td><td>变量默认值</td><td>0</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>" idparam multiFields curFieldName="tbchnname" queryTableName="fc_layoutsub"> 
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 80px; HEIGHT: 20px; TOP: 142px; LEFT: 270px" id=isSubGrid onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() noWrap controltype="checkbox" NotBg="否" value="0" fc_onclick='bill_onclick("uf_dsPropsSave();uf_isSubGrid()")' falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>是否为明细数据集</SPAN></DIV><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 52px; HEIGHT: 25px; TOP: 50px; LEFT: 480px" id=comRows onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() onchange='bill_onclick("uf_rowsGtZero();uf_dsPropsSave();")' dataset="dataset2" controltype="combobox" async="否" field="rows" china="一条记录所占行数" temptext="0&#13;&#10;1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5&#13;&#10;6&#13;&#10;7&#13;&#10;8&#13;&#10;9&#13;&#10;10&#13;&#10;11&#13;&#10;12" tempvalue="0&#13;&#10;1&#13;&#10;2&#13;&#10;3&#13;&#10;4&#13;&#10;5&#13;&#10;6&#13;&#10;7&#13;&#10;8&#13;&#10;9&#13;&#10;10&#13;&#10;11&#13;&#10;12" check="1" sql datasourceName><OPTION selected value=0>0</OPTION><OPTION value=1>1</OPTION><OPTION value=2>2</OPTION><OPTION value=3>3</OPTION><OPTION value=4>4</OPTION><OPTION value=5>5</OPTION><OPTION value=6>6</OPTION><OPTION value=7>7</OPTION><OPTION value=8>8</OPTION><OPTION value=9>9</OPTION><OPTION value=10>10</OPTION><OPTION value=11>11</OPTION><OPTION value=12>12</OPTION></SELECT> 
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 159px; HEIGHT: 20px; TOP: 203px; LEFT: 270px" id=isMuchKeyFields onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() noWrap dataset="dataset2" controltype="checkbox" field="isMuchKeyFields" china="是多字段主键字段" value="0" fc_onclick='bill_onclick("uf_muchKeyField()")' falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>是否多个字段作主键</SPAN></DIV><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 221px; HEIGHT: 20px; TOP: 226px; LEFT: 385px; ButtonWidth: 10" id=muchKeyFields onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_fccode.gif" onchange='bill_onclick("uf_xmlPropsSave()")' format="  字段中文名  |  字段名 !" visible="是" controltype="dropdownlist" temptext tempvalue FieldNameList isTreeNewSql="0" isShowTree="0" multiselect="是" addrow="否" blnempty="否" blninput="否" xml check="2" sql="select chnname ,fdname from fc_entitysub where tbname=':{dataset2.Field('tbName').Value}:'" datasourceName> 
<DIV onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 175px; HEIGHT: 20px; TOP: 204px; LEFT: 470px" id=isKeyInput onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() noWrap controltype="checkbox" value="0" fc_onclick='bill_onclick("uf_xmlPropsSave()")' falsevalue="0" truevalue="1"><INPUT oncontrolselect=controlselectcancel() type=checkbox><SPAN>主键字段是否能输入</SPAN></DIV><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 110px; HEIGHT: 14px; TOP: 229px; LEFT: 272px" id=labKeyFields onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">选择多字段作主键</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; FONT-STYLE: normal; WIDTH: 351px; FONT-FAMILY: 宋体; HEIGHT: 15px; COLOR: #808080; TOP: 116px; LEFT: 274px" id=label15 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">当布局模版的视图类型为编辑式时，提交类型需要选择只提交当前的一条记录</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; FONT-STYLE: normal; WIDTH: 196px; FONT-FAMILY: 宋体; HEIGHT: 39px; COLOR: #808080; TOP: 140px; LEFT: 411px" id=label17 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">当布局模版的视图类型为列表式时，需要勾上是否为明细数据集</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; FONT-STYLE: normal; WIDTH: 335px; FONT-FAMILY: 宋体; HEIGHT: 15px; COLOR: #808080; TOP: 1px; LEFT: 275px" id=label18 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否">如果生成的布局模板是输入查询条件时用，一定要选择电脑或手机上选择查询条件时用</LABEL></DIV>