<script>&#13;&#10;var sb = new Sys.StringBuilder();&#13;&#10;function uf_open_before()&#13;&#10;{&#13;&#10;	&#13;&#10;	if(IsSpace(fcpubdata.obj)){&#13;&#10;		labTableName.innerText=$urlParam('tbname');&#13;&#10;		labTableChName.innerText=$urlParam('tbchnname');&#13;&#10;		cmdCloseWin.style.display="none";&#13;&#10;	}else{&#13;&#10;		labTableName.innerText=fcpubdata.obj.Field('tbname').Value;&#13;&#10;		labTableChName.innerText=fcpubdata.obj.Field('tbchnname').Value;&#13;&#10;	}&#13;&#10;&#13;&#10;}	&#13;&#10;function uf_open()&#13;&#10;{&#13;&#10;	e_PropWinOnload();&#13;&#10;}	&#13;&#10;function uf_appendField()&#13;&#10;{&#13;&#10;	//window.open("../../zk/common/wizfieldmain.htm?tbname="+dataset2.Field('tbname').Value,'','height=1000, width=800,toolbar=no'); 	&#13;&#10;	var sRet = window.showModalDialog("../../zk/common/wizfieldmain.htm?tbname="+dataset2.Field('tbname').Value,'','dialogHeight:600px; dialogWidth:500px;center:yes;resizable:yes;scroll:no;status:no'); 	&#13;&#10;	if(sRet == "ok"){&#13;&#10;		dataset2.Open();	&#13;&#10;	}&#13;&#10;}&#13;&#10;function uf_changeField()&#13;&#10;{&#13;&#10;	//window.open("../../zk/common/wizfieldmain.htm?tbname="+dataset2.Field('tbname').Value+"&fdname="+dataset2.Field('fdname').Value,'','toolbar=no'); &#13;&#10;	var sRet = window.showModalDialog("../../zk/common/wizfieldmain.htm?tbname="+dataset2.Field('tbname').Value+"&fdname="+dataset2.Field('fdname').Value,'','dialogHeight:600px; dialogWidth:500px;center:yes;resizable:yes;scroll:no;status:no');	&#13;&#10;	if(sRet == "ok"){&#13;&#10;		dataset2.Open();	&#13;&#10;	}&#13;&#10;&#13;&#10;}&#13;&#10;function uf_deleteField(delRow)&#13;&#10;{&#13;&#10;	var ret;&#13;&#10;	sb = new Sys.StringBuilder();&#13;&#10;	if(delRow == 'false'){&#13;&#10;		ret = window.confirm("确定删除当前行信息吗？");	&#13;&#10;	} else {&#13;&#10;		ret = window.confirm("确定删除当前行信息及数据库中的字段吗？")&#13;&#10;		sb.append("<alter tableName='"+dataset2.Field('tbname').Value+"'>");&#13;&#10;		sb.append("<detail> drop column " +dataset2.Field('fdname').Value + "</detail>");&#13;&#10; 		sb.append("</alter>");&#13;&#10;	}&#13;&#10;	if (ret==false) {&#13;&#10;		return;&#13;&#10;	} &#13;&#10;	sb.append("<delete tableName='FC_ENTITYSUB'>");&#13;&#10;    sb.append("<where> tbname = '"+dataset2.Field('tbname').Value +"' and fdname = '"+dataset2.Field('fdname').Value+"'</where>");&#13;&#10; 	sb.append("</delete>");&#13;&#10; 	sb.append("<delete tableName='fc_relation'> <where>  (tbname1='" + dataset2.Field('tbname').Value + "'   and fdname1='" + dataset2.Field('fdname').Value + "') or  (tbname2='" + dataset2.Field('tbname').Value + "'   and fdname2='" + dataset2.Field('fdname').Value + "') </where></delete>");&#13;&#10; 	//uf_del_fc_relation_record()//获取删除语句&#13;&#10;	var xmlSql = sb.toString();&#13;&#10;	doSaveData(xmlSql,function (){&#13;&#10;		if(delRow == 'false'){&#13;&#10;			alert("删除行记录成功");&#13;&#10;		}else{&#13;&#10;			alert("删除物理表结构及行记录成功");&#13;&#10;		}&#13;&#10;		dataset2.Open();&#13;&#10;	});	&#13;&#10;	/*function uf_del_fc_relation_record(){&#13;&#10;	    var findFieldSql = "select fdname2 from fc_relation where tbname2='" +  dataset2.Field('tbname').Value + "'  and fdname2 ='" + dataset2.Field('fdname').Value+ "'";&#13;&#10;		var retField = SqlToField(findFieldSql);&#13;&#10;	    if (IsSpace(retField) == false) {&#13;&#10;			sb.append("<delete tableName='fc_relation'> <where>  tbname2='" + dataset2.Field('tbname').Value + "'   and fdname2='" +dataset2.Field('fdname').Value + "'</where></delete>");	&#13;&#10;		}	&#13;&#10;	}*/&#13;&#10;}&#13;&#10;&#13;&#10;    &#13;&#10;</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" toolbar="不带工具栏" OtherSave="否" codeheader entertype="修改" keyfield runsave idtype="1" contxml="<root><label><id>label5</id><id>label6</id><id>labTableName</id><id>labTableChName</id></label><button><id>cmdAdd</id><id>cmdEdit</id><id>cmdDel</id><id>button10</id><id>cmdCloseWin</id><id>cmdDownMove</id><id>button11</id><id>cmdUpMove</id></button><grid><id>grid1</id></grid><dataset><id>dataset2</id></dataset></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:11;radio:1;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:12;text:8;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:1;dataset:4;spin:0;excel:0;tree:0;ebshow:0;ebiao:1;layout:0;page:0;eblayout:0;test:undefined" isCheckPermit="否" alertType="1" userType BLONclose BLONopenBefore="uf_open_before();" BLONopen="uf_open();" window="有模式窗口" posheight="582" poswidth="630" postop posleft center="居中" isfile="是" type="ZK" caption="字段信息列表" dj_sn="entityField" billtaborder="<root><taborder>grid1</taborder><taborder>cmdAdd</taborder><taborder>cmdEdit</taborder><taborder>cmdDel</taborder><taborder>button10</taborder><taborder>cmdCloseWin</taborder><taborder>cmdDownMove</taborder><taborder>button11</taborder><taborder>cmdUpMove</taborder></root>" unselectable="on" runParams envType="电脑" useHelp allBrowser="否" BLONresizeAfter BLONresizeBefore><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 571px; HEIGHT: 172px; TOP: 57px; LEFT: 6px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" visible="是" dataset="dataset2" canselect="是" autoheight="是" autowidth="是" autoappend="否" readonly="否" SetRowHeight="是" hideHscroll="auto" hideVscroll="auto" blRowNo="否" bodyrowheight="-1" bodyrows="-1" crosstabsql coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabdatatype="0" crosstabtitle usertitlehtml titlerows titlerowheight usertitle iscrosstab="否" rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 142px; LEFT: 601px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="5" controltype="dataset" datasourceName savetable="FC_ENTITYSUB" issubds="否" submitno="1" submittype="1" isaddemptyrec="否" saveastable="FC_ENTITYSUB" pubpara="否" opensortno="1" isSubGrid="否" async="否" AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll masterdsfield masterds subdsfield idparam opensql="select FC_ENTITYSUB.* from FC_ENTITYSUB where &#13;&#10;tbname=':{labTableName.innerText}:' Order By sortNo&#13;&#10;&#13;&#10;" formatxml='<root><tr rowstate="add"><td>TBNAME</td><td>表名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>FDNAME</td><td>字段名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>120</td><td></td><td></td><td></td><td></td><td></td><td>uf_changeField()</td><td></td><td></td></tr><tr rowstate="add"><td>CHNNAME</td><td>字段中文名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>270</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>FDSIZE</td><td>字段长度</td><td>整数</td><td>4</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>65</td><td></td><td></td><td></td><td></td><td></td><td>uf_changeField()</td><td></td><td></td></tr><tr rowstate="add"><td>FDDEC</td><td>小数位数</td><td>整数</td><td>4</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>65</td><td></td><td></td><td></td><td></td><td></td><td>uf_changeField()</td><td></td><td></td></tr><tr rowstate="add"><td>FDTYPE</td><td>字段数据类型</td><td>字符</td><td>4</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>90</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>TYPE</td><td>字段类型</td><td>字符</td><td>10</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>70</td><td></td><td></td><td></td><td></td><td></td><td>uf_changeField()</td><td></td><td></td></tr><tr rowstate="add"><td>sortNo</td><td>序列号</td><td>整数</td><td>4</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' iscreatetable><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 38px; LEFT: 8px" id=label5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" NotBg="否" inputTag="否">表名：</LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 71px; HEIGHT: 15px; TOP: 38px; LEFT: 259px" id=label6 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" NotBg="否" inputTag="否">表中文名：</LABEL><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 5px; BORDER-RIGHT: 0px; LEFT: 7px" id=cmdAdd onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_appendField()")' dropstyle="否"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 5px; BORDER-RIGHT: 0px; LEFT: 76px" id=cmdEdit onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_changeField()")' dropstyle="否"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 5px; BORDER-RIGHT: 0px; LEFT: 145px" id=cmdDel onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;uf_deleteField('false')&quot;)" dropstyle="否"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 110px; HEIGHT: 23px; TOP: 4px; LEFT: 290px" id=button10 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;$eform('提交数据成功后提示')&quot;)">保存字段中文名</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 5px; BORDER-RIGHT: 0px; LEFT: 544px" id=cmdCloseWin onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;$eform('关闭窗口')&quot;)"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 5px; BORDER-RIGHT: 0px; LEFT: 474px" id=cmdDownMove onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("GridChangeRowSort(false,grid1)")'></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 4px; LEFT: 214px" id=button11 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;uf_deleteField('true')&quot;)">删除字段</BUTTON><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; FONT-STYLE: normal; WIDTH: 181px; FONT-FAMILY: 宋体; HEIGHT: 15px; TOP: 38px; TEXT-DECORATION: underline; LEFT: 47px" id=labTableName onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" china="表名" dataset="dataset2" field="TBNAME"></LABEL><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; FONT-STYLE: normal; WIDTH: 250px; FONT-FAMILY: 宋体; HEIGHT: 15px; TOP: 38px; TEXT-DECORATION: underline; LEFT: 326px" id=labTableChName onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否"></LABEL><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 5px; BORDER-RIGHT: 0px; LEFT: 405px" id=cmdUpMove onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("GridChangeRowSort(true,grid1)")'></BUTTON></DIV>