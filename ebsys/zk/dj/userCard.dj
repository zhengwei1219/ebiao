<script>function uf_open()&#13;&#10;{&#13;&#10;	/*if(parent.Request.QueryString('id').toString()=="")&#13;&#10;	{&#13;&#10;		txtOrgid.value=parent.Request.QueryString('orgid').toString();&#13;&#10;		txtOrgid.fireEvent("onchange");&#13;&#10;	}&#13;&#10;	else&#13;&#10;	{&#13;&#10;		dataset2.Open("select FCQ_USER.* from FCQ_USER  where userid='"+parent.Request.QueryString('id').toString()+"'");&#13;&#10;		fcpubdata.keyValue = parent.Request.QueryString('id').toString();	&#13;&#10;	}//*/&#13;&#10;	var myDate = new Date();&#13;&#10;	var nowDate = myDate.getFullYear()+"-"+myDate.getMonth()+1+"-"+myDate.getDate();&#13;&#10;	dataset2.Field('editPasswordTime').Value= nowDate;&#13;&#10;	new Eform.SysForm().setButtonImage();&#13;&#10;&#13;&#10;}&#13;&#10;&#13;&#10;function uf_isNull()&#13;&#10;{&#13;&#10;	var retxml=SqlToField("select loginname from fcq_user where loginname='"+txtLogName.value+"'");&#13;&#10;	if(txtLogName.value	=="")&#13;&#10;	{&#13;&#10;		alert("登录名不能为空");&#13;&#10;		return;&#13;&#10;	}else if(retxml != "")&#13;&#10;	{&#13;&#10;		alert("登录名存在，请重新输入") ;&#13;&#10;		return;	&#13;&#10;	}else{&#13;&#10;		$eform('提交数据成功后退出');&#13;&#10;	}&#13;&#10;}&#13;&#10;function uf_sendDataset(sId,sfileName){//把选择输入控件的值传到数据集上&#13;&#10;	if(sId.selectedIndex != -1) dataset2.Field(sfileName).Value=sId.options[sId.selectedIndex].text;&#13;&#10;}&#13;&#10;function uf_save(){&#13;&#10;	//uf_sendDataset(combobox4,'deptname');	&#13;&#10;	//uf_sendDataset(combobox1,'rolename');&#13;&#10;	if(getTopWin().zksysset.usernameset == "是"){&#13;&#10;		var l = Trim($id('txtName').value).length;&#13;&#10;		if((l<6) || (l>24))	{&#13;&#10;			alert("用户名长度应为6到24之间")	;&#13;&#10;			return;&#13;&#10;		}&#13;&#10;	}&#13;&#10;	uf_sendDataset(combobox2,'PROFILENAME');&#13;&#10;	$eform('提交数据成功后刷新上一窗口');&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function uf_selRole(){&#13;&#10;	CommonSelect({&#13;&#10;		istree: 1, //可选项, 弹出窗口中是否有tree控件,其值=0或1.树控件可以单独用,或是和grid,radiolist,checkboxlist组合用,组合用时可以设置树控件的宽度.&#13;&#10;		height :600,&#13;&#10;		width :450,&#13;&#10;		obj : txtRoleId, //必选项, 用于修改的前一窗口控件对象,包含是grid对象.&#13;&#10;		idfieldname : "roleid", //可选项, 前一窗口的id字段名,用于按字段同名传递数据.只在isgrid!=1时才有效.&#13;&#10;		textfieldname : "rolename", //可选项, 前一窗口的text字段名,用于按字段同名传递数据.只在isgrid!=1时才有效&#13;&#10;		hidefields : "roleid",// 隐藏字段&#13;&#10;		istreenewsql : 1,&#13;&#10;		roottext: "角色", //树控件的根节点文本&#13;&#10;		sql : "select roleid,parentid,rolename ,roleid from fcq_role where deleteMark=0"	  //必选项, 弹出窗口的显示数据用的SQL语句.&#13;&#10;	&#13;&#10;		})	&#13;&#10;	&#13;&#10;}</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true toolbar="不带工具栏" billtaborder="<root><taborder>txtLogName</taborder><taborder>txtName</taborder><taborder>combobox2</taborder><taborder>cmdOk</taborder><taborder>cmdClose</taborder></root>" dj_sn="userCard" caption="用户卡片输入表" type="ZK" isfile="是" center="居中" posleft postop poswidth="485" posheight="115" window="有模式窗口" BLONopen="uf_open()" BLONopenBefore BLONclose userType alertType="1" isCheckPermit="否" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:12;radio:0;listbox:0;textarea:1;combobox:4;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:1;tab:0;div:0;DsMain_field:0;a:0;button:6;text:13;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:0;dataset:1;spin:0;excel:0;tree:1;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" contxml="<root><label><id>label1</id><id>label5</id><id>label11</id></label><combobox><id>combobox2</id></combobox><button><id>cmdOk</id><id>cmdClose</id></button><text><id>txtName</id><id>txtLogName</id></text><dataset><id>dataset2</id></dataset></root>" idtype="1" runsave keyfield="id" entertype="修改" codeheader="YHB" OtherSave="否" jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" envType="电脑" useHelp allBrowser="否" BLONresizeAfter BLONresizeBefore runParams userToolbar='<tr rowstate="add"><td>ok</td><td>提交数据成功后刷新上一窗口</td><td></td><td>uf_save()</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>close</td><td>关闭窗口</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>' unselectable="on" viewType=" "><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 138px; HEIGHT: 25px; TOP: 50px; LEFT: 87px" id=combobox2 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() dataset="dataset2" controltype="combobox" async="否" datasourceName field="PROFILEID" china="PROFILEID" sql="select profileId,profileName from fcq_profile where deleteMark <> 1 and profileId<> 'systemadmin' " temptext tempvalue check="2"></SELECT><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 81px; HEIGHT: 17px; TOP: 54px; LEFT: 13px" id=label1 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="是" NotBg="否">默认角色名</LABEL><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 137px; HEIGHT: 20px; TOP: 27px; LEFT: 321px" id=txtName onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() value=用户名 size=39 dataset="dataset2" controltype="text" field="username" china="用户名" fc_ondblclick="bill_ondblclick(&quot;uf_sendDataset(txtName,'username')&quot;)"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 32px; LEFT: 263px" id=label5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="是" NotBg="否">用户名</LABEL><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 71px; LEFT: 540px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="1" controltype="dataset" async="否" isSubGrid="否" opensortno="1" pubpara="否" saveastable="FCQ_USER" isaddemptyrec="否" submittype="2" submitno="1" issubds="否" savetable="FCQ_USER" AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll fieldtrans="<root><field><name>rolename</name><trans></trans><rtrans></rtrans><sql>select%20roleid%20%2Crolename%20from%20fcq_role</sql></field></root>" idparam="USE" datasourceName iscreatetable queryTableName="FCQ_USER" formatxml="<root><tr rowstate=&quot;add&quot;><td>userid</td><td>ID</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>username</td><td>用户名</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>是</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>LOGINNAME</td><td>登录名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>是</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>PROFILEID</td><td>简档名称</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>是</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>ORGID</td><td>ORGID</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>PASSWORD</td><td>PASSWORD</td><td>字符</td><td>50</td><td></td><td>数据项</td><td>e10adc3949ba59abbe56e057f20f883e</td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>deleteMark</td><td>删除标记</td><td>整数</td><td>4</td><td></td><td>变量默认值</td><td>0</td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>right</td><td>80</td><td></td><td></td><td>$valid('整数');</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>sortNo</td><td>序列号</td><td>整数</td><td>4</td><td></td><td>变量默认值</td><td>getMaxIntNo('SOR')</td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>right</td><td>80</td><td></td><td></td><td>$valid('整数');</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>PROFILENAME</td><td>PROFILENAME</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>skin</td><td>皮肤</td><td>字符</td><td>50</td><td></td><td>数据项</td><td>blue</td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>editPasswordTime</td><td>编辑密码时间</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>" masterdsfield masterds subdsfield opensql="select FCQ_USER.*  from FCQ_USER  where userid=':{fcpubdata.obj.Field('userid').Value}:'"><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 138px; HEIGHT: 20px; TOP: 27px; LEFT: 87px" id=txtLogName onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() dataset="dataset2" controltype="text" field="LOGINNAME" china="LOGINNAME"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 65px; HEIGHT: 15px; TOP: 32px; LEFT: 13px" id=label11 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="是" NotBg="否">登录名</LABEL><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 25px; TOP: 2px; LEFT: 11px" id=cmdOk onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;$eform('提交数据成功后刷新上一窗口')&quot;)"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 25px; TOP: 2px; LEFT: 88px" id=cmdClose onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;$eform('关闭窗口')&quot;)"></BUTTON></DIV>