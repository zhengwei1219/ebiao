<script>function uf_open()&#13;&#10;{&#13;&#10;	fcpubdata.cardWinUrl='entity';&#13;&#10;	e_PropWinOnload();&#13;&#10;}	&#13;&#10;var xmlSql="";&#13;&#10;var sb = new Sys.StringBuilder();&#13;&#10;function uf_deleteTable(deltable)&#13;&#10;{&#13;&#10;	var ret;&#13;&#10;	sb = new Sys.StringBuilder();&#13;&#10;	if(dataset3.RecordCount < 1)return alert("没有删除的表")&#13;&#10;	if(deltable == "false"){&#13;&#10;		 ret = window.confirm("确定删除当前行信息吗？");&#13;&#10;	}else{&#13;&#10;		ret = window.confirm("确定删除当前行信息和物理表的结构及所有记录吗？");&#13;&#10;		sb.append("<drop tableName='"+dataset3.Field('tbname').Value+"'>");&#13;&#10; 		sb.append("</drop>");&#13;&#10;	}&#13;&#10;	if (ret==false) {&#13;&#10;		return;&#13;&#10;	}   &#13;&#10;	sb.append("<delete tableName='fc_entity'>");&#13;&#10;    sb.append("<where>tbname='"+dataset3.Field('tbname').Value+"' </where>");&#13;&#10; 	sb.append("</delete>");&#13;&#10; 	sb.append("<delete tableName='fc_entitysub'>");&#13;&#10; 	sb.append("<where>tbname='"+dataset3.Field('tbname').Value+"' </where>");&#13;&#10; 	sb.append("</delete>");&#13;&#10; 	sb.append("<delete tableName='fc_relation'> <where>  tbname2='" + dataset3.Field('tbname').Value + "' or  tbname1='" +  dataset3.Field('tbname').Value + "' </where></delete>");&#13;&#10;	xmlSql = sb.toString();&#13;&#10;	doSaveData(xmlSql,function (){&#13;&#10;		if(deltable == "false"){&#13;&#10;			alert("删除表记录成功")&#13;&#10;		}else{&#13;&#10;			alert("删除物理表结构及所有记录成功")&#13;&#10;		}&#13;&#10;		dataset3.Open();&#13;&#10;	});	&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function uf_addTable()&#13;&#10;{&#13;&#10;	DjOpen("entity",dataset3,"新增");&#13;&#10;}&#13;&#10;function uf_entityField()&#13;&#10;{&#13;&#10;	if(dataset3.RecordCount < 1)return alert("没有表信息")&#13;&#10;	&#13;&#10;	var url = "../../fceform/common/djframe.htm?djtype=ZK&djsn=entityField&tbname="+dataset3.Field('tbname').Value+"&tbchnname="+escape(dataset3.Field('tbchnname').Value);&#13;&#10;	var name =dataset3.Field('tbname').Value+ "表";&#13;&#10;	if(NavJs.mainOpenUrl(url,name)) return;&#13;&#10;	&#13;&#10;	&#13;&#10;	DjOpen("entityField",dataset3);&#13;&#10;}&#13;&#10;function uf_entityQuery()&#13;&#10;{&#13;&#10;	if(dataset3.RecordCount < 1)return alert("没有表信息")&#13;&#10;	DjOpen("entityQuery",dataset3);&#13;&#10;}&#13;&#10;&#13;&#10;function uf_entityUnit()&#13;&#10;{&#13;&#10;	if(dataset3.RecordCount < 1)return alert("没有表信息")&#13;&#10;	DjOpen("zk_set_unit",dataset3);&#13;&#10;}	&#13;&#10;&#13;&#10;function uf_entityValid()&#13;&#10;{&#13;&#10;	if(dataset3.RecordCount < 1)return alert("没有表信息")&#13;&#10;	&#13;&#10;	DjOpen("entityValid",dataset3,"修改");&#13;&#10;}&#13;&#10;</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" toolbar="不带工具栏" OtherSave="否" codeheader entertype="修改" keyfield runsave idtype="1" contxml="<root><button><id>cmdAdd</id><id>cmdDel</id><id>cmdEdit</id><id>button6</id><id>button7</id><id>button10</id><id>button11</id><id>cmdUpMove</id><id>cmdDownMove</id><id>unit</id></button><grid><id>grid1</id></grid><dataset><id>dataset3</id></dataset></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:1;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:1;button:14;text:0;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:1;dataset:1;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" isCheckPermit="否" alertType="1" userType BLONclose BLONopenBefore BLONopen="uf_open();" window="当前窗口" posheight poswidth postop posleft center="  " isfile="是" type="ZK" caption="数据库的表信息" dj_sn="entityList" billtaborder="<root><taborder>grid1</taborder><taborder>cmdAdd</taborder><taborder>cmdDel</taborder><taborder>cmdEdit</taborder><taborder>button6</taborder><taborder>button7</taborder><taborder>button10</taborder><taborder>button11</taborder><taborder>cmdUpMove</taborder><taborder>cmdDownMove</taborder><taborder>unit</taborder></root>" unselectable="on"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 552px; HEIGHT: 329px; TOP: 33px; LEFT: 3px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" visible="是" dataset="dataset3" canselect="是" autoheight="是" autowidth="是" autoappend="否" readonly="否" SetRowHeight="是" hideHscroll="auto" hideVscroll="auto" blRowNo="否" bodyrowheight="-1" bodyrows="-1" crosstabsql coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabdatatype="0" crosstabtitle usertitlehtml titlerows titlerowheight usertitle iscrosstab="否" rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 105px; LEFT: 570px" id=dataset3 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="4" controltype="dataset" datasourceName savetable="FC_ENTITY" issubds="否" submitno="1" submittype="1" isaddemptyrec="否" saveastable="FC_ENTITY" pubpara="否" opensortno="1" isSubGrid="否" async="否" AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll masterdsfield masterds subdsfield idparam opensql="select FC_ENTITY.* from FC_ENTITY Order By sortNo" formatxml='<root><tr rowstate="add"><td>TBNAME</td><td>表名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>200</td><td></td><td></td><td></td><td></td><td></td><td>uf_entityField()</td><td></td><td></td></tr><tr rowstate="add"><td>TBCHNNAME</td><td>表中文名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>300</td><td></td><td></td><td></td><td></td><td></td><td>uf_entityField()</td><td></td><td></td></tr><tr rowstate="add"><td>sortNo</td><td>序列号</td><td>整数</td><td>4</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' iscreatetable><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 4px; BORDER-RIGHT: 0px; LEFT: 3px" id=cmdAdd onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;$eform('打开窗口新增记录')&quot;)" dropstyle="否"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 4px; BORDER-RIGHT: 0px; LEFT: 143px" id=cmdDel onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;uf_deleteTable('false')&quot;)" dropstyle="否"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 4px; BORDER-RIGHT: 0px; LEFT: 73px" id=cmdEdit onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;$eform('打开窗口修改记录')&quot;)" dropstyle="否"></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 3px; LEFT: 289px" id=button6 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_entityField()")' dropstyle="否">字段信息</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 3px; LEFT: 442px" id=button7 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_entityValid()")' dropstyle="否">数据验证</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 3px; LEFT: 365px" id=button10 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_entityQuery()")' dropstyle="否">查询信息</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 3px; LEFT: 212px" id=button11 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick="bill_onclick(&quot;uf_deleteTable('true')&quot;)">删除表</BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 4px; BORDER-RIGHT: 0px; LEFT: 597px" id=cmdUpMove onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("if(dataset3.RecordCount > 0){GridChangeRowSort(true,grid1)}")'></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; WIDTH: 66px; HEIGHT: 21px; BORDER-TOP: 0px; TOP: 4px; BORDER-RIGHT: 0px; LEFT: 667px" id=cmdDownMove onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("if(dataset3.RecordCount > 0){GridChangeRowSort(false,grid1)}")'></BUTTON><BUTTON onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 75px; HEIGHT: 23px; TOP: 3px; LEFT: 519px" id=unit onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="button" fc_onclick='bill_onclick("uf_entityUnit()")'>功能点信息</BUTTON></DIV>