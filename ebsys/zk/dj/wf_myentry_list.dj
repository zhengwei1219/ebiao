<script>var oWorkflow;&#13;&#10;function uf_onload_before(){&#13;&#10;	ds1.PageSize=20;	&#13;&#10;	&#13;&#10;	var sKey = "?operate=get_all_workflows" ;&#13;&#10;&#13;&#10;&#13;&#10;	&#13;&#10;	var strReturn=new Eapi.RunAjax().sendHttp(location.protocol+'//'+location.host + fcpubdata.servletPath + '/WorkflowPortal'+fcpubdata.dotnetVersion + sKey,"");&#13;&#10;	&#13;&#10;	var oDom=SetDom(strReturn);&#13;&#10;	&#13;&#10;	var bResult=oDom.childNodes(0).childNodes(0).text;&#13;&#10;	&#13;&#10;	if (bResult=="false") {&#13;&#10;		alert(oDom.childNodes(0).childNodes(1).text);&#13;&#10;		return;	&#13;&#10;	}&#13;&#10;	var sXml = oDom.childNodes(0).childNodes(1).xml;&#13;&#10;	oWorkflow = SetDom(sXml);&#13;&#10;	&#13;&#10;	&#13;&#10;}&#13;&#10;//读出时转换出流程描述&#13;&#10;function uf_getWorflowDesc(flowname,flowversion){&#13;&#10;	&#13;&#10;	if (oWorkflow.documentElement==null) 	return "";&#13;&#10;	var desc = "";&#13;&#10;	&#13;&#10;	var node = oWorkflow.documentElement.selectSingleNode("//tr[name='" + flowname + "'  and version='" + flowversion + "']"); &#13;&#10;	&#13;&#10;	if (node!=null){&#13;&#10;		desc = node.selectSingleNode("desc").text;&#13;&#10;	}&#13;&#10;	return desc;&#13;&#10;		&#13;&#10;}&#13;&#10;&#13;&#10;function setStateCondition(sField,sValue){&#13;&#10;	var str = "";&#13;&#10;	if (!IsSpace(sValue))&#13;&#10;		str = " and " +  sField + " =" + sValue ;&#13;&#10;	else	&#13;&#10;		str = " and " +  sField + " =1" ;&#13;&#10;	return str;	&#13;&#10;}&#13;&#10;&#13;&#10;function uf_getStateName(state){&#13;&#10;	//var state = $f_value('state');&#13;&#10;	&#13;&#10;	var statename="";&#13;&#10;	if (state==0)&#13;&#10;		statename = "创建";&#13;&#10;	else if (state==1)&#13;&#10;		statename = "激活";	&#13;&#10;	else if (state==2)&#13;&#10;		statename = "挂起";&#13;&#10;	else if (state==3)&#13;&#10;		statename = "终止";&#13;&#10;	else if (state==4)&#13;&#10;		statename = "完成";&#13;&#10;	else&#13;&#10;		statename = "未知";			&#13;&#10;					&#13;&#10;	return statename;	&#13;&#10;}&#13;&#10;&#13;&#10;function uf_showFlow(instanceId){&#13;&#10;	var surl = location.protocol+'//'+location.host + fcpubdata.path +"/fceform/common/djframe.htm?djsn=wf_history_list&djtype=WF";&#13;&#10;	surl +="&wf_id=" + instanceId;&#13;&#10;	window.open(surl);	&#13;&#10;}</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" alertType="1" isCheckPermit="否" BLONopenBefore="uf_onload_before()" BLONclose BLONopen center="  " unselectable="on" toolbar="查询组" dj_sn="wf_myentry_list" type="ZK" caption="我发起的流程实例" window="当前窗口" posleft postop poswidth posheight isfile="是" billtaborder="<root><taborder>grid1</taborder><taborder>cboState</taborder><taborder>wfname</taborder><taborder>wfversion</taborder></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:5;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:0;text:1;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:2;dataset:2;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0" contxml="<root><label><id>Label15</id><id>label0</id><id>label4</id><id>label5</id></label><combobox><id>cboState</id></combobox><text><id>wfname</id><id>wfversion</id></text><grid><id>grid1</id></grid><dataset><id>ds1</id></dataset></root>" userType><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 97px; LEFT: 813px" id=ds1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" fieldtrans="<root><field><name>state_name</name><trans></trans><rtrans>uf_getStateName%28%20%24f_value%28%27state%27%29%29%3B</rtrans><sql></sql></field><field><name>desc</name><trans></trans><rtrans>uf_getWorflowDesc%28%24f_value%28%27name%27%29%2C%24f_value%28%27version%27%29%29</rtrans><sql></sql></field></root>" saveastable formatxml="<root><tr rowstate=&quot;add&quot;><td>id</td><td>实例id</td><td>整数</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>name</td><td>流程名称</td><td>字符</td><td>255</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>160</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>desc</td><td>流程描述</td><td>字符</td><td>100</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>version</td><td>流程版本</td><td>整数</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>state</td><td>流程实例状态</td><td>整数</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>state_name</td><td>实例状态</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>100</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>create_date</td><td>发起日期</td><td>时间</td><td>30</td><td>0</td><td>数据项</td><td></td><td>yyyy.MM.dd hh:mm:ss</td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>140</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>show_trace</td><td>运行轨迹</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>_self</td><td>javascript:uf_showFlow(ds1.Field('id').Value)</td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>bug_title</td><td>提问标题</td><td>字符</td><td>100</td><td>0</td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>320</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>" pubpara="否" opensql="select e.*,'查看轨迹' as show_trace,bug_title &#13;&#10; from wf_wfentry e inner join fcq_bug on e.id=fcq_bug.wf_id &#13;&#10; where e.create_user_id = ':{GetSessionOne('userid')}:'&#13;&#10;      :{setStateCondition('e.state',cboState.value)}:&#13;&#10;      :{setLikeCondition('e.name',wfname.value)}:&#13;&#10;      :{setIntCondition('e.version',wfversion.value)}:&#13;&#10; order by e.create_date desc &#13;&#10;" AfterScroll BeforeScroll AfterPost BeforePost BeforeOpen AfterOpen opensortno="1" async="否" datasourceName isaddemptyrec="否" submittype="1" submitno="1" savetable idparam issubds="否" subdsfield masterds masterdsfield isSubGrid="否" controltype="dataset" idtype="1"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 787px; HEIGHT: 650px; TOP: 56px; LEFT: 4px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" bodyrowheight="-1" bodyrows="-1" hideVscroll="auto" SetRowHeight="是" crosstabsql cavg="否" cmax="否" cmin="否" csum="否" ccount="否" ravg="否" rmax="否" rmin="否" rsum="否" rcount="否" coltitle rowtitle crosstabformat crosstabsumtype="0" crosstabdatatype="0" crosstabtitle iscrosstab="否" usertitlehtml titlerows usertitle titlerowheight readonly="否" autoappend="否" autowidth="是" autoheight="是" canselect="是" visible="是" hideHscroll="auto" blRowNo="否" dataset="ds1"><SPAN style="POSITION: absolute; WIDTH: 213px; DISPLAY: block; FONT-FAMILY: 宋体; HEIGHT: 28px; COLOR: #0000ff; FONT-SIZE: 12pt; TOP: 31px; FONT-WEIGHT: bold; TEXT-DECORATION: underline; LEFT: 7px" id=Label15 controltype="label" align="Center" NotBg="否" inputTag="否">我的流程实例</SPAN><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 57px; HEIGHT: 16px; TOP: 9px; LEFT: 7px" id=label0 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" NotBg="否" inputTag="否">模版名称</LABEL><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 149px; HEIGHT: 20px; TOP: 5px; LEFT: 63px" id=wfname onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() size=27 controltype="text" china="模版名称"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 36px; HEIGHT: 15px; TOP: 8px; LEFT: 227px" id=label4 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" NotBg="否" inputTag="否">版本</LABEL><INPUT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 150px; HEIGHT: 20px; TOP: 5px; LEFT: 256px" id=wfversion onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() size=27 controltype="text" china="版本"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 58px; HEIGHT: 18px; TOP: 9px; LEFT: 423px" id=label5 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" NotBg="否" inputTag="否">实例状态</LABEL><SELECT onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 145px; HEIGHT: 25px; TOP: 5px; LEFT: 480px" id=cboState onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() async="否" datasourceName controltype="combobox" china="实例状态" check="1" sql tempvalue="0&#13;&#10;1&#13;&#10;2&#13;&#10;3&#13;&#10;4" temptext="创建&#13;&#10;激活&#13;&#10;挂起&#13;&#10;终止&#13;&#10;完成"><OPTION value=0>创建</OPTION><OPTION selected value=1>激活</OPTION><OPTION value=2>挂起</OPTION><OPTION value=3>终止</OPTION><OPTION value=4>完成</OPTION></SELECT></DIV>