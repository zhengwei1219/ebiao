<script>function uf_moveRecAfter(){//移动记录之后&#13;&#10;	dataset1.Field('type').Value = 2;&#13;&#10;	dataset1.Field('detail').Value = dataset1.Field('unitContId').Value;&#13;&#10;	dataset1.Field('profileId').Value = fcpubdata.obj.Field('profileId').Value;&#13;&#10;	dataset1.Field('permit').Value = 1;&#13;&#10;	dataset1.Field('permit1').Value = "只读";&#13;&#10;	dataset1.fset_cont()&#13;&#10;	dataset1.Update();&#13;&#10;}&#13;&#10;&#13;&#10;&#13;&#10;function uf_selUnit(){&#13;&#10;	fcUserFunc.selectProfile('droProfile','profileId','profileName');&#13;&#10;	dataset1.Open("select id,detail, detail,detail as djsn,detail as WF_DESCRIPTION,detail as NAME,detail as TABLECHNNAME,detail as FIELDCHNNAME,permit, permit as permit1, profileid ,type from fcq_profilesub where  type=2 and profileid='"+dataset2.Field('profileId').Value +"'");	&#13;&#10;}&#13;&#10;&#13;&#10;function uf_addRow(){&#13;&#10;	if(IsSpace(dataset2.Field('profileId').Value)) {&#13;&#10;		alert("请先选择角色");&#13;&#10;		return;&#13;&#10;	}else{&#13;&#10;		$eform('增加行');&#13;&#10;	}	&#13;&#10;}</script> 
<DIV oncontrolselect=controlselect() id=SKbillsheet contentEditable=true toolbar="自定义工具栏" runParams jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;~userfunc.js" dj_sn="zk_control_permit" caption="控件权限" type="ZK" isfile="是" center="居中" posleft postop poswidth="800" posheight="500" window="有模式窗口" BLONopen BLONopenBefore BLONclose billtaborder="<root><taborder>grid1</taborder><taborder>droProfile</taborder></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:0;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:0;text:0;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:1;dataset:0;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;eblayout:0;test:undefined" contxml="<root><label><id>label1</id></label><dropdownlist><id>droProfile</id></dropdownlist><grid><id>grid1</id></grid><dataset><id>dataset1</id><id>dataset2</id></dataset></root>" userToolbar='<tr rowstate="add"><td>addrow</td><td>增加行</td><td></td><td>uf_addRow()</td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>deleterow</td><td>删除行</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>ok</td><td>提交数据成功后刷新上一窗口</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>' userType alertType="1" isCheckPermit="否" BLONresizeBefore BLONresizeAfter allBrowser="否" useHelp envType="电脑" unselectable="on"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 261px; LEFT: 812px" id=dataset1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="1" controltype="dataset" pubpara="否" opensortno="1" isaddemptyrec="否" submittype="1" submitno="1" issubds="否" isSubGrid="否" savetable="FCQ_PROFILESUB" idparam="PRO" async="否" fieldtrans="<root><field><name>permit1</name><trans></trans><rtrans></rtrans><sql>select%20code%20as%20permit%2Cname%20as%20permit1%20from%20fc_datadict%20where%20typeName%3D%27%u63A7%u4EF6%u6743%u9650%27</sql></field><field><name>WF_DESCRIPTION</name><trans></trans><rtrans></rtrans><sql>select%20wfFieldId%20%2CWF_DESCRIPTION%20from%20fcq_wf_field</sql></field><field><name>DJSN</name><trans></trans><rtrans></rtrans><sql>select%20wfFieldId%20%2Cdjsn%20from%20fcq_wf_field</sql></field><field><name>NAME</name><trans></trans><rtrans></rtrans><sql>select%20wfFieldId%2Cname%20from%20fcq_wf_field</sql></field><field><name>buttonId</name><trans></trans><rtrans></rtrans><sql>select%20wfFieldId%2CbuttonId%20from%20fcq_wf_field</sql></field><field><name>TABLECHNNAME</name><trans></trans><rtrans></rtrans><sql>select%20wfFieldId%2CTABLECHNNAME%20from%20fcq_wf_field</sql></field><field><name>FIELDCHNNAME</name><trans></trans><rtrans></rtrans><sql>select%20wfFieldId%2CFIELDCHNNAME%20from%20fcq_wf_field</sql></field></root>" datasourceName AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll saveastable opensql subdsfield masterds masterdsfield formatxml="<root><tr rowstate=&quot;add&quot;><td>wfFieldId</td><td>id</td><td>字符</td><td>11</td><td></td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>WF_DESCRIPTION</td><td>流程中文名称</td><td>字符</td><td>400</td><td></td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%21%26amp%3Bnbsp%3B%u6D41%u7A0B%u540D%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%u8868%u5355%u540D%26amp%3Bnbsp%3B%7C%u5E03%u5C40%u6A21%u677F%u540D%7C%u5E03%u5C40%u6A21%u677F%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%u5B57%u6BB5%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%u63A7%u4EF6id%26amp%3Bnbsp%3B%7Cid%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%3C/format%3E%3Csql1%3Eselect%20WF_DESCRIPTION%2Cdjsn%2Cname%2Cchnname%2CtableChnName%2CfieldChnName%2CwfFieldId%2CwfFieldId%20as%20detail%20from%20fcq_wf_field%3C/sql1%3E%3Cblninput%3E%u662F%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3Cfieldnamelist%3EWF_DESCRIPTION%2CDJSN%2Cname%2Cchnname%2CtableChnName%2CfieldChnName%2CbuttonId%2CunitcontId%3C/fieldnamelist%3E%3CisShowTree%3E0%3C/isShowTree%3E%3CisTreeNewSql%3E0%3C/isTreeNewSql%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot; multisel=&quot;&quot;><td>DJSN</td><td>表单DJSN</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%21%26amp%3Bnbsp%3B%u6D41%u7A0B%u540D%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%u8868%u5355%u540D%26amp%3Bnbsp%3B%7C%u5E03%u5C40%u6A21%u677F%u540D%7C%u5E03%u5C40%u6A21%u677F%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%u5B57%u6BB5%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%7C%3C/format%3E%3Csql1%3Eselect%20WF_DESCRIPTION%2Cdjsn%2Cname%2Cchnname%2CtableChnName%2CfieldChnName%2CwfFieldId%2CwfFieldId%20as%20detail%20from%20fcq_wf_field%3C/sql1%3E%3Cblninput%3E%u662F%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3Cfieldnamelist%3EWF_DESCRIPTION%2CDJSN%2Cname%2Cchnname%2CtableChnName%2CfieldChnName%2CbuttonId%2Cid%3C/fieldnamelist%3E%3CisShowTree%3E0%3C/isShowTree%3E%3CisTreeNewSql%3E0%3C/isTreeNewSql%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>100</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>NAME</td><td>布局模板名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%21%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u6D41%u7A0B%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u8868%u5355%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u5E03%u5C40%u6A21%u677F%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u5E03%u5C40%u6A21%u677F%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u8868%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%u5B57%u6BB5%u4E2D%u6587%u540D%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3B%u63A7%u4EF6id%26amp%3Bnbsp%3B%7C%26amp%3Bnbsp%3Bid%26amp%3Bnbsp%3B%26amp%3Bnbsp%3B%7C%3C/format%3E%3Csql1%3Eselect%20WF_DESCRIPTION%2CDJSN%2Cname%2Cchnname%2CtableChnName%2CfieldChnName%2CwfFieldId%2CwfFieldId%20as%20detail%20from%20fcq_wf_field%3C/sql1%3E%3Cblninput%3E%u662F%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3Cfieldnamelist%3EWF_DESCRIPTION%2CDJSN%2Cname%2Cchnname%2CtableChnName%2CfieldChnName%2CbuttonId%2Cid%3C/fieldnamelist%3E%3CisShowTree%3E0%3C/isShowTree%3E%3CisTreeNewSql%3E0%3C/isTreeNewSql%3E%3C/code%3E</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>130</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>CHNNAME</td><td>布局模板名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>150</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>TABLECHNNAME</td><td>数据集表名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>130</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot; multisel=&quot;是&quot;><td>FIELDCHNNAME</td><td>数据集字段名</td><td>字符</td><td>50</td><td></td><td>数据项</td><td></td><td></td><td>是</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>130</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>permit</td><td>权限</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot; multisel=&quot;是&quot;><td>permit1</td><td>权限</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td></td><td></td><td>选%3Ccode%3E%3Cformat%3E%26amp%3Bnbsp%3B%21%26amp%3Bnbsp%3B%u6743%u9650%26amp%3Bnbsp%3B%7C%3C/format%3E%3Csql1%3Eselect%20name%20as%20permitchn%20%2Ccode%20as%20permit%20from%20fc_datadict%20where%20typeName%3D%27%u63A7%u4EF6%u6743%u9650%27%3C/sql1%3E%3Cblninput%3E%u5426%3C/blninput%3E%3Cblnempty%3E%u5426%3C/blnempty%3E%3Ccheck%3E2%3C/check%3E%3Cfieldnamelist%3Epermit1%2Cpermit%3C/fieldnamelist%3E%3CisShowTree%3E0%3C/isShowTree%3E%3CisTreeNewSql%3E0%3C/isTreeNewSql%3E%3C/code%3E</td><td>是</td><td>否</td><td>是</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot; multisel=&quot;&quot;><td>profileId</td><td>简档id</td><td>字符</td><td>11</td><td>0</td><td>变量默认值</td><td>dataset2.Field('profileId').Value</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>detail</td><td>详细id</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>type</td><td>类型</td><td>字符</td><td>10</td><td>0</td><td>数据项</td><td>2</td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>id</td><td>id字段</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>" queryTableName="FCQ_PROFILE" curFieldName="UNITCONTID" multiFields><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 786px; HEIGHT: 437px; TOP: 27px; LEFT: 3px" id=grid1 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_webgrid.gif" controltype="grid" dataset="dataset1" visible="是" bodyrows="-1" bodyrowheight="-1" hideVscroll="auto" SetRowHeight="是" readonly="否" autoappend="否" autowidth="是" autoheight="是" canselect="是" blRowNo="否" hideHscroll="auto" titlerowheight titlerows usertitlehtml usertitle iscrosstab="否" crosstabtitle crosstabsumtype="0" crosstabformat rowtitle coltitle rcount="否" rsum="否" rmin="否" rmax="否" ravg="否" ccount="否" csum="否" cmin="否" cmax="否" cavg="否" crosstabsql crosstabdatatype="0"><LABEL onresizeend=resizeEnd() oncontrolselect=controlselect() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 16px; TOP: 8px; LEFT: 9px" id=label1 onresize=resize() onmove=move() onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() controltype="label" inputTag="否" NotBg="否">角色</LABEL><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 333px; HEIGHT: 20px; TOP: 3px; LEFT: 46px; ButtonWidth: 10" id=droProfile onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_fccode.gif" controltype="dropdownlist" format dataset="dataset2" visible="是" field="profileName" multiselect="否" addrow="否" blnempty="否" blninput="否" isShowTree="0" isTreeNewSql="0" FieldNameList xml datasourceName onclickopen='bill_onclick("uf_selUnit()")' check="1" tempvalue temptext sql china="角色名称"><IMG onresizeend=resizeEnd() style="POSITION: absolute; WIDTH: 39px; HEIGHT: 47px; TOP: 49px; LEFT: 825px" id=dataset2 onmovestart=moveStart() onmoveend=moveEnd() onresizestart=resizeStart() src="../../fceform/images/ef_designer_dataset.gif" idtype="1" controltype="dataset" pubpara="否" opensortno="1" isaddemptyrec="否" submittype="1" submitno="1" issubds="否" isSubGrid="否" savetable idparam async="否" datasourceName AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll saveastable opensql subdsfield masterds masterdsfield formatxml="<root><tr rowstate=&quot;add&quot;><td>profileid</td><td>角色id</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate=&quot;add&quot;><td>profileName</td><td>角色名称</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td>$valid('汉字、字母、数字或_');$valid('字段值不重复');$valid('值已存在');</td><td></td><td></td><td></td><td></td><td></td></tr></root>" queryTableName="FCQ_PROFILE"></DIV>