<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=gb2312"><title>
    数据库中的表信息</title>
<link rel="stylesheet" type="text/css" href="efhelpstyle.css">
    </head>

<body leftmargin="0" topmargin="0">
<table class="tableTitle">
    <tr><td class="title">数据库中的表信息</td>
     </tr>
     <tr><td class="aTd "> <a class ="aDwHomepage"  href='http://www.fcsoft.com.cn'>
         返回公司首页</a><a class="aHelpHomePage" href='efhelp_index.htm'>返回帮助首页</a></td>
    </tr>
</table>
<div  class="mainDiv">
&nbsp;&nbsp;&nbsp;&nbsp;为了减少在表单设计器中重复输入及重复设置，需要在实体表中记录更加详细的信息，除了表中文名，字段中文名之外，还有字段的详细类型，输入控件的信息，数据验证信息等等，为此做了数据库中的表信息界面。数据库中的表信息是对日常数据库表结构和实体表同时维护,也可以在界面上输入实体表的详细信息。但它没有对物理数据库中的表设置主键,不能为空等功能，如需要这个就到 <a class="shili" href="../../fceform/common/djframe.htm?djsn=fcs_edit_db&amp;djtype=ST"> 库结构维护</a> 里去设置.单击 <A  class=shili   href='../../fceform/common/djframe.htm?djsn=entityList&djtype=ZK'>数据库中的表信息</A> 进入数据库中的表信息界面.
    <div class="divTitle">1. 表维护</div>  
&nbsp;&nbsp;&nbsp;&nbsp;一般来说，需要把在表单设计器中要用到的表结构信息加到实体表中，并不一定需要将数据库中的所有表结构信息都保存到实体表中，有时为了安全的考虑，常会故意隐藏一些表，在表单设计器中选择表名时看不到这些表。在操作时，有一个选项开关：选择修改真正库结构及实体表的信息是指不但对数据库的物理表进行操作,还对实体表进行操作,选择只修改实体表中的记录是只对实体表进行操作.而不修改数据库的物理表结构，一定要注意这个开关不要选错。在新建表时,输入了英文名而没输入中文名,英文表名会默认赋给中文表名.<br />
    <div class="divTitle"> 1.1 新建表</div>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 单击【添加】按钮,弹出表信息编辑页,输入保存表名,表中文名,选中修改真正库结构及实体表信息,会在数据库中新建此表,并且会给此表添加一个char型长度11的字段(ownerid),同时给fc_entity表和fc_entitysub表保存一条相应的记录,选中只修改实体表信息,只给fc_entity表和fc_entitysub保存一条相应的记录.
     <div class="divTitle"> 1.2 修改实体表中文名</div>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    如下图,选择dw表单击【编辑】按钮,或双击dw字段,弹出表信息编辑页面,修改表中文名为单位表,如只修改表中文名时,不管你选择修改真正库结构及实体表记录,还是选择只修改实体表的信息,只会修改实体表的信息，因为数据库的物理表结构没有地方来保存表中文名.单击【确定】按钮进行保存,fc_entity表第四行的tbchnname字段值改成了单位表.<br />
     <img  src ="images/help_1_4_3.gif"/>
      <div class="divTitle"> 1.3 删除选中表在实体表的记录</div>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在数据库中的表信息页面中,单击数据库信息页面中的【删除】按钮,只删除fc_entity表的相关记录.
       <div class="divTitle"> 1.4 删除选中表在数据库的表结构和在实体表的记录</div>
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在数据库中的表信息页面中,单击数据库信息页面中的【删除表】按钮,删除物理数据库中的表和fc_entity表中的相关记录.<br /> <div class="divTitle">
        2. 字段维护</div>  
        <div class="divTitle">2.1 添加字段</div>  
        &nbsp;&nbsp;&nbsp;&nbsp;在数据库中的表信息页面中选中表名,单击【字段信息】按钮,进入字段信息网页对话框中,单击【添加】按钮,弹出字段网页对话框来添加字段,它根据添加到字段英文名,字段中文名,选择字段类型及长度,在fc_entitysub表生成一条记录,例如选择修改真正的库结构及实体表信息,它会给数据库中相关表添加一个字段,而且还会在fc_entitysub表添加一条记录.选择只修改实体表信息则只会在fc_entitysub表添加一条记录。根据添加的字段英文名,字段中文名,选择字段类型及长度,来增加type(类型如;电话实数)字段,detailxml(整个字段信息)字段,linktbname(关联表名)字段,linkfdname(关联字段名)字段的记录.
        <div class="divTitle">2.2 编辑字段</div> 
        &nbsp;&nbsp;&nbsp;&nbsp;在数据库中的表信息中,选中表名dw,单击【字段信息】按钮进入dw表的字段信息列表,双击sphone字段进入字段设置向导,单击上一步进入字段类型设置页,设置字段类型为电话,单击下一页到修改中文名页,再单击下一页到保存页,选择是修改真正库结构及实体表信息还是只修改实体表信息,设置完成进行保存.在做表单时,它还会自动给字段添加验证,字段sphone类型是电话,会给数据集控件的字段添加电话验证.<br /><img   src ="images/help_1_4_13.gif"/><img style="padding: 5px 5px 10px 10px"  src ="images/help_1_4_14.gif"/>
        <div class="divTitle">2.3 删除</div>  
        &nbsp;&nbsp;&nbsp;&nbsp;在字段信息列表中，选中字段单击【删除】按钮,只删除fc_entitysub表的相关字段的记录.
        <div class="divTitle">2.4 删除字段</div> 
        &nbsp;&nbsp;&nbsp;&nbsp;在字段信息列表中，选中字段单击【删除表】按钮,删除fc_entitysub表的相关字段的记录还要删除数据库中表的相关字段.
         <div class="divTitle">2.5 保存字段中文名</div>  
         &nbsp;&nbsp;&nbsp;&nbsp;实体表fc_entitysub的chnname(中文名)字段,只能在数据库中表信息中修改.下面是同时修改多个中文字段名,选中表名dw,单击字段信息,进入字段信息维护界面,把所要修改的字段名修改完后,单击【保存字段中文名】按钮,就实现了多个中文名同时保存,但它不会保存type(类型如;电话实数)字段,detailxml(整个字段信息)字段,linktbname(关联表名)字段,linkfdname(关联字段名)字段的信息,只会修改chnname字段的信息.<br /><img    src ="images/help_1_4_5.gif"/><br />
     <div class="divTitle">2.6 上移下移</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;通过【上移】【下移】按钮来调整字段的前后顺序.
    <div class="divTitle">
        3. 表的中文名,字段中文名在哪些地方会用到</div> 
        &nbsp;&nbsp;&nbsp; 在数据集的打开页的生成sql语句向导中用到表中文名,字段中文名.<br /><img   src ="images/help_1_4_6.gif"/><img  src ="images/help_1_4_7.gif"/><br />
        &nbsp;&nbsp;&nbsp;&nbsp;表中文名,中文字段名,还被用到了数据集字段页中的批量增加和字段名的模糊查找,如下图: <br /><img   src ="images/help_1_4_8.gif"/><img   src ="images/help_1_4_9.gif"/><br />
    &nbsp;&nbsp;&nbsp;&nbsp;数据集的保存表名用到了表中文名.<br /><img  src ="images/help_1_4_15.gif"/><br />
       &nbsp;&nbsp;&nbsp;&nbsp;在表单设计器中,单击工具栏中的隐藏/显示控件图片<img style="padding:0,2,0,2"  src ="images/showHide.gif"/>,在左侧字段列表中,显示出字段中文名,双击字段中文名(如下图的图片字段),会在设计器中自动生成一个dbimg控件 
    ,它是根据字段类型生成不同控件,类型是图片生成dbimg控件,类型是日期时间生成text控件加弹出选择日期窗口的button控件等等.<br /><img   src ="images/help_1_4_10.gif"/><br />
    <div class="divTitle">4 fc_entitysub表中字段类型的作用</div> 
    <div class="divTitle">4.1 ID字段</div> 
    &nbsp;&nbsp;&nbsp; 本类型还需要设置主键字段类别。在表单设计器的数据集中生成的信息为：本字段为主键,不显示. 
    <br /><img  src ="images/help_1_4_22.gif"/>
    <div class="divTitle">4.2 自动编号</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;自动编号是系统使用您定义的显示格式生成的序列编号.该编号对于每条新记录会自动递增.
    <br /><img  src ="images/help_1_4_22.gif"/>
    <div class="divTitle">4.3 名称</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;名称是常用于单位名称,部门名称等名称字段,一个表通常只有一个此类型的字段,它会给数据集的字段进行名称验证(是否符合字母数字和下划线这一规则).  <br /><img  src ="images/help_1_4_23.gif"/>
    <div class="divTitle">4.4 文本</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入任何字母和数字组合,此字段在库中是char型.
    <div class="divTitle">4.5 文本区</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;文本区是允许用户输入多行文本,最多可输入 255 个字符.
    <div class="divTitle">4.6 整数</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;整数是允许用户输入整数.将删除前置零,在数据集的字段中自动生成整数验证.
    <div class="divTitle">4.7 实数</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;实数是允许用户输入任何数字.将删除前置零,在数据集的字段中自动生成实数验证.
    <div class="divTitle">4.8 日期</div>  
    &nbsp;&nbsp;&nbsp;&nbsp;日期是允许用户输入日期或从弹出式日历中选择日期,在数据集的日期字段上生成日期验证,用新建向导建表单,会生成一个text控件和一个button控件,单击button控件会弹出一个日历,在表单工具栏的隐藏显示控件中单击日期字段名也会生成一个选择输入日期的text控件与一个button的组合.
    <br /><img  src ="images/help_1_4_24.gif"/>
    <div class="divTitle">4.9 日期时间</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;日期时间和日期一样,只不过它还会显示时间.
    <div class="divTitle">4.10 图片字段</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;图片字段是可以选择一个本地的图片文件,上传,保存到库中,在生成表单向导中建表单,会生成一个dbimg控件,单击表单工具栏的隐藏显示字段名的图片字段会生成一个dbimg控件.
    <div class="divTitle">4.11 大文本区</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入多行文本,最多可输入 32000 个字符.
    <div class="divTitle">4.12 复选框</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户设置选择"真"（选取）或"假"（不选取）时的值,如下图领工资字段的类型是复选框控件,在新建表单向导中建表或在表单设计器的隐藏显示控件中双击领工资字段,领工资字段都会生成一个复选框控件.
    <br /><img  src ="images/help_1_4_26.gif"/>
    <div class="divTitle">4.13 选项列表</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户从定义的列表中选择值,fcs_employee表的ssex字段选择了radio,那在新建表向导中,ssex字段生成一个radio控件,或在隐藏显示控件的字段列表中双击ssex字段,它也会生成一个radio控件,如上图中的radio控件.<br /><img  src ="images/help_1_4_25.gif"/><br />&nbsp;<div class="divTitle">4.14 多选列表</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户从定义的列表中选择多个值,例如fcs_employee表的job(职位)字段类型选择了多选列表,使用的控件是dropdownlist,设置了默认值,那它在新建表单向导或隐藏显示控件中双击job字段,此字段生成的是一个dropdwonlist控件,默认值是它设置的默认值.
    <br /><img  src ="images/help_1_4_27.gif"/> <img  src ="images/help_1_4_28.gif"/>
    <div class="divTitle">4.15 百分比</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入百分比数字.
    <div class="divTitle">4.16 币种</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入美元或其他货币金额.
    <div class="divTitle">4.17 url</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入任何有效的网址.如果用户单击该字段,将在单独的浏览器窗口中打开该 URL.
    <div class="divTitle">4.18 电子邮件</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入电子邮件地址.将验证输入的地址以确保格式正确.之后,用户单击该字段时便会自动启动电子邮件程序,并将电子邮件发送到该地址.
    <div class="divTitle">4.19 电话</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入任何电话号码,在数据集字段上自动生成电话验证.
    <div class="divTitle">4.20 邮编</div> 
   &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入任何有效的邮编,字段类型为邮编时,会在数据集的字段上进行邮编验证.
    <div class="divTitle">4.21 身份证</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入任何有效的身份证号,类型为身份证的字段在数据集自动生成身份证验证.
    <div class="divTitle">4.22 QQ</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;允许用户输入任何QQ号,在数据集中的字段生成qq验证.
    <div class="divTitle">4.23 公式</div> 
   &nbsp;&nbsp;&nbsp;&nbsp;根据您定义的公式表达式派生其值的只读字段.任何来源字段有所更改,该公式字段均将更新.
    <br /><img  src ="images/help_1_4_29.gif"/>
    <div class="divTitle">4.24 累计汇总</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;在相关列表中显示字段的汇总值,最大值和最小值的只读字段或在相关列表中列出的所有记录的记录数,在主表中才有意义.
    <div class="divTitle">4.25 查找关系</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;创建一个将此对象链接到另一对象的关系. 关系字段允许用户单击查找图标,以从弹出列表中选择值. 另一对象是列表中值的源.它相当于数据库的外键,在新建表单向导中建表单或在表单设计器的隐藏显示字段名中双击部门id字段生成控件,都会根据sdwid(单位id)字段的类型查找关系中设置的显示控件类别(dropdownlist)和相关表名(fcs_dw)生成一个dropdownlist控件并添加sql语句.
    <br /><img  src ="images/help_1_4_32.gif"/><img  src ="images/help_1_4_33.gif"/>
    <div class="divTitle">4.26 主从关系</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;所有详细信息记录的关系字段必填. 
一旦关系字段的值被保存,就无法更改. 
详细信息记录的所有权和共享由主记录确定. 
当用户删除主记录时,将删除所有详细信息记录.在字段信息中设置了表与表之间是主从关系类型,它在新建表单向导中会字段生成下图中主从数据集的设置.
    <br /><img  src ="images/help_1_4_31.gif"/><img  src ="images/help_1_4_30.gif"/>
  <div class="divTitle">5. 查询信息</div>    
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FC_QUERY表查询信息,即常用的查询的输出字段信息.它给表单上具有sql初始化数据的控件(combobox,dropdwwnlist,checkboxlist,radiolist,tree),在数据库的FC_QUERY表中,记录每个控件要查询的表的字段名.&nbsp;这样可以减少手写输入sql语句,来选择输入sql语句.  
  <div class="divTitle">5.1 FC_QUERY表结构</div>
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CREATE TABLE FC_QUERY (<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type int NOT NULL, //类别<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tbname varchar(50) NOT NULL,//表名<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fdlist varchar(2000) NULL,//字段名列表,用逗号分隔<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fdchnlist varchar(3000) NULL//字段中文名列表,用逗号分隔<br />
    &nbsp;&nbsp;&nbsp; );<br />
    
   
<div class="divTitle">5.2 生成查询字段</div> 
<div class="tishi">注意:你在查询表中选择的是表中文名,字段中文名返回的是表英文名,字段英文名.</div> 
    <img  src ="images/help_1_4_11.gif"/><br />
    <div class="divTitle">5.3 选择输入查询语句</div> 
     <div class="divTitle">5.3.1 combobox</div> 
    &nbsp;&nbsp;&nbsp;&nbsp;如下图,在combobox控件属性页中,单击通过选择产生sql语句按钮,在资料选择对话框中,会显示出FC_QUERY表中类型是combobox控件的所有记录,当你选择职员表,单击确定后,在combobox控件的sql语句输入框,会显示 
    select semployeeid,semployeename from FCS_EMPLOYEE<br />
    <br /><img  src ="images/help_1_4_12.gif"/>
    <div class="divTitle">5.3.2 dropdownlist</div>
    &nbsp;&nbsp;&nbsp;&nbsp;通过在dropdownlist中,选择取值方式为sql语句,单击通过选择产生sql语句,打开资料选择页来产生要返回给dropdownlist控件的sql语句.<br />
    <img  src ="images/help_1_4_35.gif"/> 
    <div class="divTitle">5.3.3 radiolist</div> 
     &nbsp;&nbsp;&nbsp;&nbsp;通过在radiolist中,选择取值方式为sql语句,单击通过选择产生sql语句,打开资料选择页来产生要返回给radiolist控件的sql语句.<br />
    <img  src ="images/help_1_4_34.gif"/>
    <div class="divTitle">5.3.4 checkboxlist</div>
     &nbsp;&nbsp;&nbsp;&nbsp;通过在checkboxlist中,选择取值方式为sql语句,单击通过选择产生sql语句,打开资料选择页来产生要返回给checkboxlist控件的sql语句.<br />
    <img  src ="images/help_1_4_36.gif"/> 
    <div class="divTitle">5.3.5 tree</div> 
     &nbsp;&nbsp;&nbsp;&nbsp;tree控件sql语句写法,例如select code,name,id from table1 order by 
    code其中code字段为分类编号字段,应为01,0101,0102之类的值,name字段为显示值,id字段为隐藏值,id字段可以不要.通过在tree控件中,选择取值方式为sql语句,单击通过选择产生sql语句,打开资料选择页来产生要返回给tree控件的sql语句.<br />
    <img  src ="images/help_1_4_37.gif"/>
    <div class="divTitle">5.3.6 tree新格式sql</div> 
     &nbsp;&nbsp;&nbsp;&nbsp;tree控件新格式sql语句写法例如：select code,fathercode,name,id from table1.其中code字段为当前的分类编号字段,fathercode为上级分类编号字段,name字段为显示值,id字段为隐藏值,id字段可以不要.通过在tree控件中,选择取值方式为sql语句,单击通过选择产生sql语句,打开资料选择页来产生要返回给tree控件的新格式sql语句.<br />
    <img  src ="images/help_1_4_39.gif"/>
</div>
</body>
</html>
