<script>function uf_save(){&#13;&#10;	var sdwname=DsMain.Field("sdwname").Value+"加存储过程";&#13;&#10;	var xmlproc="<proc name='proc_updatedw'><params> <param name='@sdwid' dataType='字符串'>ZCF00000002</param> <param name='@sdwname' dataType='字符串'>"+sdwname+"</param></params></proc>";&#13;&#10;&#13;&#10;	DsMain.eventSaveRecordAfter = xmlproc;&#13;&#10;	var sErr = doSubmitData(function(){alert("提交数据成功!");CloseBill();}); &#13;&#10;	if(IsSpace(sErr)==false) alert(sErr);&#13;&#10;}&#13;&#10;&#13;&#10;function uf_testProcedure(){&#13;&#10;	var xmlproc1="<proc name='proc_updatedw'><params> <param name='@sdwid' dataType='字符串'>ZCF00000002</param> <param name='@sdwname' dataType='字符串'>哈药集团</param></params></proc>";	&#13;&#10;	doSaveData(xmlproc1);&#13;&#10;}</script> 
<DIV class=dj oncontrolselect=controlselect() id=SKbillsheet onkeydown="" ondblclick="" contentEditable=true jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcstring.js&#13;&#10;fcnumdate.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;" contxml="<root><label><id>Label2</id><id>Label3</id></label><textarea><id>textarea1</id></textarea><button><id>FCButton3</id><id>button2</id></button><text><id>SKDBedit1</id><id>SKDBedit2</id></text><dataset><id>DsMain</id></dataset></root>" controlno="SKButton:4;SKDBedit:11;checkbox:0;label:1;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:1;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;DsMain_field:0;a:0;button:2;text:1;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:0;dataset:0;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0" billtaborder="<root><taborder>SKDBedit2</taborder><taborder>SKDBedit1</taborder><taborder>FCButton3</taborder><taborder>textarea1</taborder><taborder>button2</taborder></root>" idtype="1" OtherSave="否" isfile="是" posheight="451" poswidth="612" postop posleft entertype="修改" window="当前窗口" keyfield="sdwid" codeheader="ZCF" mkbh="ZC" caption="保存时执行存储过程" type="FT" dj_sn="sql_djsave_procedure" toolbar="不带工具栏" unselectable="on" blmode="其他" center="居中" BLONopen BLONopenBefore BLONclose userType alertType="1" isCheckPermit="否" runsave mastertable="employee" dj_id="10" para="<r></r>"><SPAN id=Label2 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 13px; WIDTH: 49px; POSITION: absolute; TOP: 46px; HEIGHT: 12px" controltype="label" NotBg="否" align="Left">单位编码</SPAN><SPAN id=Label3 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 210px; WIDTH: 49px; POSITION: absolute; TOP: 46px; HEIGHT: 12px" controltype="label" NotBg="否" align="Left">单位名称</SPAN><INPUT id=SKDBedit1 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 264px; WIDTH: 121px; POSITION: absolute; TOP: 41px; HEIGHT: 20px; BACKGROUND-COLOR: #ffffff; TEXT-ALIGN: left" controltype="text" dataset="DsMain" field="SDWNAME" china="单位名称"><INPUT id=SKDBedit2 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 73px; WIDTH: 122px; POSITION: absolute; TOP: 41px; HEIGHT: 20px; BACKGROUND-COLOR: #ffffff; TEXT-ALIGN: left" controltype="text" dataset="DsMain" field="SDWCODE" china="单位编号"><BUTTON onmove=move() oncontrolselect=controlselect() id=FCButton3 onresize=resize() style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 13px; WIDTH: 150px; FONT-FAMILY: ; POSITION: absolute; TOP: 1px; HEIGHT: 25px; BACKGROUND-COLOR: #d4d0c8" controltype="button" fc_onclick='bill_onclick("uf_save()")' dropstyle="否">带SQL命令来保存</BUTTON><IMG id=DsMain style="LEFT: 451px; WIDTH: 42px; POSITION: absolute; TOP: 11px; HEIGHT: 45px" src="../../fceform/images/ef_designer_dataset.gif" idtype="1" controltype="dataset" datasourceName masterdsfield masterds subdsfield issubds="否" idparam="ZCF" savetable="FCS_DW" submitno="1" submittype="2" isSubGrid="否" isaddemptyrec="否" temptable="TMP_BILL_ZCASH_Y_DIRECT" opensortno="1" AfterOpen BeforeOpen BeforePost AfterPost BeforeScroll AfterScroll chnname opensql iscreatetable="否" pubpara="否" Like="否" formatxml='<root><tr rowstate="edit"><td>SDWCODE</td><td>单位编号</td><td>字符</td><td>15</td><td>0</td><td>数据项</td><td></td><td></td><td></td><td>是</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>否</td><td>_blank</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>SDWID</td><td>单位ID</td><td>字符</td><td>11</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td><td>否</td><td>是</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr rowstate="add"><td>SDWNAME</td><td>单位名称</td><td>字符</td><td>50</td><td>0</td><td>数据项</td><td></td><td></td><td>否</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td><td>否</td><td>否</td><td></td><td></td><td>left</td><td>80</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></root>' saveastable="fcs_dw"><TEXTAREA onmove=move() oncontrolselect=controlselect() id=textarea1 onresizeend=resizeEnd() onresizestart=resizeStart() onmoveend=moveEnd() onresize=resize() style="LEFT: 15px; WIDTH: 369px; POSITION: absolute; TOP: 69px; HEIGHT: 49px" onmovestart=moveStart() rows=1 readOnly cols=73 controltype="textarea" induce="否" value="textarea1">说明:本示例演示执行表单保存函数的同一事务中,同时执行一些其它的存储过程语句.</TEXTAREA><BUTTON onmove=move() oncontrolselect=controlselect() id=button2 onresizeend=resizeEnd() onresizestart=resizeStart() onmoveend=moveEnd() onresize=resize() style="LEFT: 184px; WIDTH: 202px; POSITION: absolute; TOP: 1px; HEIGHT: 25px" onmovestart=moveStart() controltype="button" fc_onclick='bill_onclick("uf_testProcedure()")'>doSaveData方法执行存储过程</BUTTON></DIV>